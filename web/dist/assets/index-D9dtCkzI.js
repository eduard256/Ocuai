import{P as e,n as t,s as r,S as n,i as a,e as s,c as o,a as l,d as c,b as i,t as d,f as u,u as m,g,h as p,j as f,k as x,l as $,m as y,o as h,p as b,q as w,r as v,v as k,w as _,x as C,y as N,z as M,A as z,B as L,C as j,D as S,E as T,F as O,G as U,H as E,I as H,J as R,K as D,L as P,M as W,N as A,O as I,Q as V,R as B,T as J,U as F,V as G,W as q,X as K}from"./vendor-CNeRceCR.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add(e);const Z=[];function Q(e,n=t){let a;const s=new Set;function o(t){if(r(e,t)&&(e=t,a)){const t=!Z.length;for(const r of s)r[1](),Z.push(r,e);if(t){for(let e=0;e<Z.length;e+=2)Z[e][0](Z[e+1]);Z.length=0}}}function l(t){o(t(e))}return{set:o,update:l,subscribe:function(r,c=t){const i=[r,c];return s.add(i),1===s.size&&(a=n(o,l)||t),r(e),()=>{s.delete(i),0===s.size&&a&&(a(),a=null)}}}}const X=Q({cameras_total:0,cameras_online:0,events_today:0,events_total:0,system_uptime:0}),Y=Q([]),ee=Q([]),te=Q(null),re=Q([]);let ne=0;function ae(e,t="info",r=5e3){const n=++ne,a={id:n,message:e,type:t,timestamp:Date.now()};return re.update(e=>[...e,a]),r>0&&setTimeout(()=>{!function(e){re.update(t=>t.filter(t=>t.id!==e))}(n)},r),n}
/**
 * @license lucide-svelte v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const se={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function oe(e,t,r){const n=e.slice();return n[10]=t[r][0],n[11]=t[r][1],n}function le(e){let t,r=[e[11]],n={};for(let a=0;a<r.length;a+=1)n=l(n,r[a]);return{c(){t=h(e[10]),f(t,n)},m(e,r){$(e,t,r)},p(e,a){f(t,n=x(r,[32&a&&e[11]]))},d(e){e&&c(t)}}}function ce(e){let t,n=e[10],a=e[10]&&le(e);return{c(){a&&a.c(),t=b()},m(e,r){a&&a.m(e,r),$(e,t,r)},p(e,s){e[10]?n?r(n,e[10])?(a.d(1),a=le(e),n=e[10],a.c(),a.m(t.parentNode,t)):a.p(e,s):(a=le(e),n=e[10],a.c(),a.m(t.parentNode,t)):n&&(a.d(1),a=null,n=e[10])},d(e){e&&c(t),a&&a.d(e)}}}function ie(e){let t,r,n,a,w,v=s(e[5]),k=[];for(let s=0;s<v.length;s+=1)k[s]=ce(oe(e,v,s));const _=e[9].default,C=o(_,e,e[8],null);let N=[se,e[6],{width:e[2]},{height:e[2]},{stroke:e[1]},{"stroke-width":n=e[4]?24*Number(e[3])/Number(e[2]):e[3]},{class:a=`lucide-icon lucide lucide-${e[0]} ${e[7].class??""}`}],M={};for(let s=0;s<N.length;s+=1)M=l(M,N[s]);return{c(){t=h("svg");for(let e=0;e<k.length;e+=1)k[e].c();r=b(),C&&C.c(),f(t,M)},m(e,n){$(e,t,n);for(let r=0;r<k.length;r+=1)k[r]&&k[r].m(t,null);y(t,r),C&&C.m(t,null),w=!0},p(e,[o]){if(32&o){let n;for(v=s(e[5]),n=0;n<v.length;n+=1){const a=oe(e,v,n);k[n]?k[n].p(a,o):(k[n]=ce(a),k[n].c(),k[n].m(t,r))}for(;n<k.length;n+=1)k[n].d(1);k.length=v.length}C&&C.p&&(!w||256&o)&&m(C,_,e,e[8],w?p(_,e[8],o,null):g(e[8]),null),f(t,M=x(N,[se,64&o&&e[6],(!w||4&o)&&{width:e[2]},(!w||4&o)&&{height:e[2]},(!w||2&o)&&{stroke:e[1]},(!w||28&o&&n!==(n=e[4]?24*Number(e[3])/Number(e[2]):e[3]))&&{"stroke-width":n},(!w||129&o&&a!==(a=`lucide-icon lucide lucide-${e[0]} ${e[7].class??""}`))&&{class:a}]))},i(e){w||(u(C,e),w=!0)},o(e){d(C,e),w=!1},d(e){e&&c(t),i(k,e),C&&C.d(e)}}}function de(e,t,r){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let a=w(t,n),{$$slots:s={},$$scope:o}=t,{name:c}=t,{color:i="currentColor"}=t,{size:d=24}=t,{strokeWidth:u=2}=t,{absoluteStrokeWidth:m=!1}=t,{iconNode:g}=t;return e.$$set=e=>{r(7,t=l(l({},t),v(e))),r(6,a=w(t,n)),"name"in e&&r(0,c=e.name),"color"in e&&r(1,i=e.color),"size"in e&&r(2,d=e.size),"strokeWidth"in e&&r(3,u=e.strokeWidth),"absoluteStrokeWidth"in e&&r(4,m=e.absoluteStrokeWidth),"iconNode"in e&&r(5,g=e.iconNode),"$$scope"in e&&r(8,o=e.$$scope)},t=v(t),[c,i,d,u,m,g,a,t,o,s]}class ue extends n{constructor(e){super(),a(this,e,de,ie,r,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function me(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function ge(e){let t,r;const n=[{name:"activity"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[me]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function pe(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"}]],t=v(t),n,a]}class fe extends n{constructor(e){super(),a(this,e,pe,ge,r,{})}}function xe(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function $e(e){let t,r;const n=[{name:"alert-triangle"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[xe]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function ye(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],t=v(t),n,a]}class he extends n{constructor(e){super(),a(this,e,ye,$e,r,{})}}function be(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function we(e){let t,r;const n=[{name:"bell"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[be]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function ve(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"}]],t=v(t),n,a]}class ke extends n{constructor(e){super(),a(this,e,ve,we,r,{})}}function _e(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Ce(e){let t,r;const n=[{name:"calendar"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[_e]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Ne(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10"}]],t=v(t),n,a]}class Me extends n{constructor(e){super(),a(this,e,Ne,Ce,r,{})}}function ze(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Le(e){let t,r;const n=[{name:"camera"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[ze]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function je(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}],["circle",{cx:"12",cy:"13",r:"3"}]],t=v(t),n,a]}class Se extends n{constructor(e){super(),a(this,e,je,Le,r,{})}}function Te(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Oe(e){let t,r;const n=[{name:"clock"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Te]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Ue(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],t=v(t),n,a]}class Ee extends n{constructor(e){super(),a(this,e,Ue,Oe,r,{})}}function He(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Re(e){let t,r;const n=[{name:"download"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[He]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function De(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],t=v(t),n,a]}class Pe extends n{constructor(e){super(),a(this,e,De,Re,r,{})}}function We(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Ae(e){let t,r;const n=[{name:"eye-off"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[We]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Ie(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22"}]],t=v(t),n,a]}class Ve extends n{constructor(e){super(),a(this,e,Ie,Ae,r,{})}}function Be(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Je(e){let t,r;const n=[{name:"eye"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Be]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Fe(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}],["circle",{cx:"12",cy:"12",r:"3"}]],t=v(t),n,a]}class Ge extends n{constructor(e){super(),a(this,e,Fe,Je,r,{})}}function qe(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Ke(e){let t,r;const n=[{name:"filter"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[qe]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Ze(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]],t=v(t),n,a]}class Qe extends n{constructor(e){super(),a(this,e,Ze,Ke,r,{})}}function Xe(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Ye(e){let t,r;const n=[{name:"home"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Xe]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function et(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]],t=v(t),n,a]}class tt extends n{constructor(e){super(),a(this,e,et,Ye,r,{})}}function rt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function nt(e){let t,r;const n=[{name:"loader"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[rt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function at(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["line",{x1:"12",x2:"12",y1:"2",y2:"6"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"}]],t=v(t),n,a]}class st extends n{constructor(e){super(),a(this,e,at,nt,r,{})}}function ot(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function lt(e){let t,r;const n=[{name:"menu"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[ot]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function ct(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["line",{x1:"4",x2:"20",y1:"12",y2:"12"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18"}]],t=v(t),n,a]}class it extends n{constructor(e){super(),a(this,e,ct,lt,r,{})}}function dt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function ut(e){let t,r;const n=[{name:"pause"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[dt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function mt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]],t=v(t),n,a]}class gt extends n{constructor(e){super(),a(this,e,mt,ut,r,{})}}function pt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function ft(e){let t,r;const n=[{name:"play"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[pt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function xt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["polygon",{points:"5 3 19 12 5 21 5 3"}]],t=v(t),n,a]}class $t extends n{constructor(e){super(),a(this,e,xt,ft,r,{})}}function yt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function ht(e){let t,r;const n=[{name:"plus"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[yt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function bt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],t=v(t),n,a]}class wt extends n{constructor(e){super(),a(this,e,bt,ht,r,{})}}function vt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function kt(e){let t,r;const n=[{name:"save"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[vt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function _t(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}],["polyline",{points:"17 21 17 13 7 13 7 21"}],["polyline",{points:"7 3 7 8 15 8"}]],t=v(t),n,a]}class Ct extends n{constructor(e){super(),a(this,e,_t,kt,r,{})}}function Nt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Mt(e){let t,r;const n=[{name:"search"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Nt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function zt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],t=v(t),n,a]}class Lt extends n{constructor(e){super(),a(this,e,zt,Mt,r,{})}}function jt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function St(e){let t,r;const n=[{name:"settings"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[jt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Tt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],t=v(t),n,a]}let Ot=class extends n{constructor(e){super(),a(this,e,Tt,St,r,{})}};function Ut(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Et(e){let t,r;const n=[{name:"trash-2"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Ut]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Ht(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],t=v(t),n,a]}class Rt extends n{constructor(e){super(),a(this,e,Ht,Et,r,{})}}function Dt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Pt(e){let t,r;const n=[{name:"upload"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Dt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Wt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],t=v(t),n,a]}class At extends n{constructor(e){super(),a(this,e,Wt,Pt,r,{})}}function It(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Vt(e){let t,r;const n=[{name:"wifi-off"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[It]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Bt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["line",{x1:"2",x2:"22",y1:"2",y2:"22"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20"}]],t=v(t),n,a]}class Jt extends n{constructor(e){super(),a(this,e,Bt,Vt,r,{})}}function Ft(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Gt(e){let t,r;const n=[{name:"wifi"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Ft]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function qt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M5 13a10 10 0 0 1 14 0"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20"}]],t=v(t),n,a]}class Kt extends n{constructor(e){super(),a(this,e,qt,Gt,r,{})}}function Zt(e){let t;const r=e[2].default,n=o(r,e,e[3],null);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,a){n&&n.p&&(!t||8&a)&&m(n,r,e,e[3],t?p(r,e[3],a,null):g(e[3]),null)},i(e){t||(u(n,e),t=!0)},o(e){d(n,e),t=!1},d(e){n&&n.d(e)}}}function Qt(e){let t,r;const n=[{name:"x"},e[1],{iconNode:e[0]}];let a={$$slots:{default:[Zt]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)a=l(a,n[s]);return t=new ue({props:a}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},p(e,[r]){const a=3&r?x(n,[n[0],2&r&&_(e[1]),1&r&&{iconNode:e[0]}]):{};8&r&&(a.$$scope={dirty:r,ctx:e}),t.$set(a)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Xt(e,t,r){let{$$slots:n={},$$scope:a}=t;return e.$$set=e=>{r(1,t=l(l({},t),v(e))),"$$scope"in e&&r(3,a=e.$$scope)},[[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],t=v(t),n,a]}class Yt extends n{constructor(e){super(),a(this,e,Xt,Qt,r,{})}}function er(e,t,r){const n=e.slice();return n[10]=t[r],n}function tr(e){let t,r,n,a;return t=new Jt({props:{size:16,class:"text-danger-500"}}),{c(){N(t.$$.fragment),r=O(),n=T("span"),n.textContent="Офлайн",E(n,"class","text-sm text-danger-600 dark:text-danger-400")},m(e,s){C(t,e,s),$(e,r,s),$(e,n,s),a=!0},i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){d(t.$$.fragment,e),a=!1},d(e){e&&(c(r),c(n)),k(t,e)}}}function rr(e){let t,r,n,a;return t=new Kt({props:{size:16,class:"text-success-500"}}),{c(){N(t.$$.fragment),r=O(),n=T("span"),n.textContent="Онлайн",E(n,"class","text-sm text-success-600 dark:text-success-400")},m(e,s){C(t,e,s),$(e,r,s),$(e,n,s),a=!0},i(e){a||(u(t.$$.fragment,e),a=!0)},o(e){d(t.$$.fragment,e),a=!1},d(e){e&&(c(r),c(n)),k(t,e)}}}function nr(e){let t,r,n,a,s,o,l,i,d,u,m,g=e[3].cameras_online+"",p=e[3].cameras_total+"",f=e[3].events_today+"",x=e[3].system_uptime&&ar(e);return{c(){t=T("div"),r=T("span"),n=U("Камеры: "),a=U(g),s=U("/"),o=U(p),l=O(),i=T("span"),d=U("События: "),u=U(f),m=O(),x&&x.c(),E(i,"class","hidden md:inline"),E(t,"class","flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400")},m(e,c){$(e,t,c),y(t,r),y(r,n),y(r,a),y(r,s),y(r,o),y(t,l),y(t,i),y(i,d),y(i,u),y(t,m),x&&x.m(t,null)},p(e,r){8&r&&g!==(g=e[3].cameras_online+"")&&z(a,g),8&r&&p!==(p=e[3].cameras_total+"")&&z(o,p),8&r&&f!==(f=e[3].events_today+"")&&z(u,f),e[3].system_uptime?x?x.p(e,r):(x=ar(e),x.c(),x.m(t,null)):x&&(x.d(1),x=null)},d(e){e&&c(t),x&&x.d()}}}function ar(e){let t,r,n,a=mr(e[3].system_uptime)+"";return{c(){t=T("span"),r=U("Uptime: "),n=U(a),E(t,"class","hidden lg:inline")},m(e,a){$(e,t,a),y(t,r),y(t,n)},p(e,t){8&t&&a!==(a=mr(e[3].system_uptime)+"")&&z(n,a)},d(e){e&&c(t)}}}function sr(e){let t,r,n=e[4].length+"";return{c(){t=T("span"),r=U(n),E(t,"class","absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-danger-500 rounded-full")},m(e,n){$(e,t,n),y(t,r)},p(e,t){16&t&&n!==(n=e[4].length+"")&&z(r,n)},d(e){e&&c(t)}}}function or(e){let t;function r(e,t){return e[4].length>0?cr:lr}let n=r(e),a=n(e);return{c(){t=T("div"),a.c(),E(t,"class","absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50 max-h-96 overflow-auto")},m(e,r){$(e,t,r),a.m(t,null)},p(e,s){n===(n=r(e))&&a?a.p(e,s):(a.d(1),a=n(e),a&&(a.c(),a.m(t,null)))},d(e){e&&c(t),a.d()}}}function lr(e){let r;return{c(){r=T("div"),r.innerHTML='<p class="text-sm text-gray-500 dark:text-gray-400">Нет уведомлений</p>',E(r,"class","p-6 text-center")},m(e,t){$(e,r,t)},p:t,d(e){e&&c(r)}}}function cr(e){let t,r,n,a=[],o=new Map,l=s(e[4]);const i=e=>e[10].id;for(let s=0;s<l.length;s+=1){let t=er(e,l,s),r=i(t);o.set(r,a[s]=ir(r,t))}return{c(){t=T("div"),t.innerHTML='<h3 class="text-sm font-medium text-gray-900 dark:text-white">Уведомления</h3>',r=O(),n=T("div");for(let e=0;e<a.length;e+=1)a[e].c();E(t,"class","p-3 border-b border-gray-200 dark:border-gray-700"),E(n,"class","divide-y divide-gray-200 dark:divide-gray-700")},m(e,s){$(e,t,s),$(e,r,s),$(e,n,s);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null)},p(e,t){16&t&&(l=s(e[4]),a=D(a,t,i,1,e,l,o,n,P,ir,null,er))},d(e){e&&(c(t),c(r),c(n));for(let t=0;t<a.length;t+=1)a[t].d()}}}function ir(e,t){let r,n,a,s,o,l,i,d,u,m,g,p,f,x=t[10].message+"",h=new Date(t[10].timestamp).toLocaleTimeString()+"";return{key:e,first:null,c(){r=T("div"),n=T("div"),a=T("div"),s=T("div"),l=O(),i=T("div"),d=T("p"),u=U(x),m=O(),g=T("p"),p=U(h),f=O(),E(s,"class",o="w-2 h-2 rounded-full bg-"+("error"===t[10].type?"danger":"warning"===t[10].type?"warning":"primary")+"-500 mt-2"),E(a,"class","flex-shrink-0"),E(d,"class","text-sm text-gray-900 dark:text-white"),E(g,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),E(i,"class","flex-1 min-w-0"),E(n,"class","flex items-start space-x-3"),E(r,"class","p-3 hover:bg-gray-50 dark:hover:bg-gray-700"),this.first=r},m(e,t){$(e,r,t),y(r,n),y(n,a),y(a,s),y(n,l),y(n,i),y(i,d),y(d,u),y(i,m),y(i,g),y(g,p),y(r,f)},p(e,r){t=e,16&r&&o!==(o="w-2 h-2 rounded-full bg-"+("error"===t[10].type?"danger":"warning"===t[10].type?"warning":"primary")+"-500 mt-2")&&E(s,"class",o),16&r&&x!==(x=t[10].message+"")&&z(u,x),16&r&&h!==(h=new Date(t[10].timestamp).toLocaleTimeString()+"")&&z(p,h)},d(e){e&&c(r)}}}function dr(e){let r,n,a;return{c(){r=T("div"),E(r,"class","fixed inset-0 z-40"),E(r,"role","button"),E(r,"tabindex","0")},m(t,s){$(t,r,s),n||(a=[S(r,"click",e[7]),S(r,"keydown",gr)],n=!0)},p:t,d(e){e&&c(r),n=!1,M(a)}}}function ur(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,w,v,_,H,R,D,P,W,A,I,V,B,J,F;s=new it({props:{size:20}});const G=[rr,tr],q=[];function K(e,t){return e[2]?0:1}f=K(e),x=q[f]=G[f](e);let Z=e[3].cameras_total>0&&nr(e);R=new ke({props:{size:20}});let Q=e[4].length>0&&sr(e),X=e[1]&&or(e),Y=e[1]&&dr(e);return{c(){t=T("header"),r=T("div"),n=T("div"),a=T("button"),N(s.$$.fragment),o=O(),l=T("h1"),i=U(e[0]),m=O(),g=T("div"),p=T("div"),x.c(),h=O(),Z&&Z.c(),w=O(),v=T("div"),_=T("div"),H=T("button"),N(R.$$.fragment),D=O(),Q&&Q.c(),P=O(),X&&X.c(),W=O(),A=T("div"),A.textContent=`${(new Date).toLocaleTimeString("ru-RU")}`,I=O(),Y&&Y.c(),V=b(),E(a,"class","p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 lg:hidden"),E(l,"class","text-xl font-semibold text-gray-900 dark:text-white"),E(p,"class","flex items-center space-x-1"),E(g,"class","hidden sm:flex items-center space-x-3"),E(n,"class","flex items-center space-x-4"),E(H,"class","p-2 rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 relative"),E(_,"class","relative"),E(A,"class","hidden sm:block text-sm text-gray-600 dark:text-gray-400"),E(v,"class","flex items-center space-x-3"),E(r,"class","flex items-center justify-between px-6 py-4"),E(t,"class","bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700")},m(c,d){$(c,t,d),y(t,r),y(r,n),y(n,a),C(s,a,null),y(n,o),y(n,l),y(l,i),y(n,m),y(n,g),y(g,p),q[f].m(p,null),y(g,h),Z&&Z.m(g,null),y(r,w),y(r,v),y(v,_),y(_,H),C(R,H,null),y(H,D),Q&&Q.m(H,null),y(_,P),X&&X.m(_,null),y(v,W),y(v,A),$(c,I,d),Y&&Y.m(c,d),$(c,V,d),B=!0,J||(F=[S(a,"click",e[5]),S(H,"click",e[6])],J=!0)},p(e,[t]){(!B||1&t)&&z(i,e[0]);let r=f;f=K(e),f!==r&&(L(),d(q[r],1,1,()=>{q[r]=null}),j(),x=q[f],x||(x=q[f]=G[f](e),x.c()),u(x,1),x.m(p,null)),e[3].cameras_total>0?Z?Z.p(e,t):(Z=nr(e),Z.c(),Z.m(g,null)):Z&&(Z.d(1),Z=null),e[4].length>0?Q?Q.p(e,t):(Q=sr(e),Q.c(),Q.m(H,null)):Q&&(Q.d(1),Q=null),e[1]?X?X.p(e,t):(X=or(e),X.c(),X.m(_,null)):X&&(X.d(1),X=null),e[1]?Y?Y.p(e,t):(Y=dr(e),Y.c(),Y.m(V.parentNode,V)):Y&&(Y.d(1),Y=null)},i(e){B||(u(s.$$.fragment,e),u(x),u(R.$$.fragment,e),B=!0)},o(e){d(s.$$.fragment,e),d(x),d(R.$$.fragment,e),B=!1},d(e){e&&(c(t),c(I),c(V)),k(s),q[f].d(),Z&&Z.d(),k(R),Q&&Q.d(),X&&X.d(),Y&&Y.d(e),J=!1,M(F)}}}function mr(e){return`${Math.floor(e/3600)}ч ${Math.floor(e%3600/60)}м`}const gr=()=>{};function pr(e,t,r){let n,a;H(e,X,e=>r(3,n=e)),H(e,re,e=>r(4,a=e));let{title:s="Ocuai"}=t;const o=R();let l=!1,c=!0;function i(){r(2,c=navigator.onLine)}"undefined"!=typeof window&&(window.addEventListener("online",i),window.addEventListener("offline",i));return e.$$set=e=>{"title"in e&&r(0,s=e.title)},[s,l,c,n,a,function(){o("toggleSidebar")},function(){r(1,l=!l)},()=>r(1,l=!1)]}class fr extends n{constructor(e){super(),a(this,e,pr,ur,r,{title:0})}}function xr(e,t,r){const n=e.slice();return n[7]=t[r],n}function $r(e){let r,n,a;return{c(){r=T("div"),E(r,"class","fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"),E(r,"role","button"),E(r,"tabindex","0")},m(t,s){$(t,r,s),n||(a=[S(r,"click",e[4]),S(r,"keydown",br)],n=!0)},p:t,d(e){e&&c(r),n=!1,M(a)}}}function yr(e,t){let r,n,a,s,o,l,i,m,g,p,f=t[7].label+"";var x=t[7].icon;function h(e,t){return{props:{size:20,class:"mr-3 flex-shrink-0 "+(e[0]===e[7].id?"text-primary-600 dark:text-primary-400":"text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-400")}}}function b(){return t[5](t[7])}return x&&(a=W(x,h(t))),{key:e,first:null,c(){r=T("li"),n=T("button"),a&&N(a.$$.fragment),s=O(),o=U(f),i=O(),E(n,"class",l="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 group "+(t[0]===t[7].id?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700")),this.first=r},m(e,t){$(e,r,t),y(r,n),a&&C(a,n,null),y(n,s),y(n,o),y(r,i),m=!0,g||(p=S(n,"click",b),g=!0)},p(e,r){if(x!==(x=(t=e)[7].icon)){if(a){L();const e=a;d(e.$$.fragment,1,0,()=>{k(e,1)}),j()}x?(a=W(x,h(t)),N(a.$$.fragment),u(a.$$.fragment,1),C(a,n,s)):a=null}else if(x){const e={};1&r&&(e.class="mr-3 flex-shrink-0 "+(t[0]===t[7].id?"text-primary-600 dark:text-primary-400":"text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-400")),a.$set(e)}(!m||1&r&&l!==(l="w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 group "+(t[0]===t[7].id?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700")))&&E(n,"class",l)},i(e){m||(a&&u(a.$$.fragment,e),m=!0)},o(e){a&&d(a.$$.fragment,e),m=!1},d(e){e&&c(r),a&&k(a),g=!1,p()}}}function hr(e){let t,r,n,a,o,l,i,m,g,p,f,x,h,b,w,v,_,M,z,U,H=[],R=new Map,P=e[1]&&$r(e);l=new Se({props:{size:20,class:"text-white"}}),f=new Yt({props:{size:20}});let W=s(e[2]);const I=e=>e[7].id;for(let s=0;s<W.length;s+=1){let t=xr(e,W,s),r=I(t);R.set(r,H[s]=yr(r,t))}return{c(){P&&P.c(),t=O(),r=T("div"),n=T("div"),a=T("div"),o=T("div"),N(l.$$.fragment),i=O(),m=T("span"),m.textContent="Ocuai",g=O(),p=T("button"),N(f.$$.fragment),x=O(),h=T("nav"),b=T("ul");for(let e=0;e<H.length;e+=1)H[e].c();w=O(),v=T("div"),v.innerHTML='<div class="flex items-center space-x-3"><div class="w-8 h-8 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center"><span class="text-xs font-medium text-gray-700 dark:text-gray-300">AI</span></div> <div><p class="text-sm font-medium text-gray-900 dark:text-white">Система активна</p> <p class="text-xs text-gray-500 dark:text-gray-400">Версия 1.0.0</p></div></div>',E(o,"class","w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center"),E(m,"class","text-xl font-bold text-gray-900 dark:text-white"),E(a,"class","flex items-center space-x-3"),E(p,"class","p-2 rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700 lg:hidden"),E(n,"class","flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"),E(b,"class","space-y-2"),E(h,"class","mt-6 px-3"),E(v,"class","absolute bottom-0 left-0 right-0 p-6 border-t border-gray-200 dark:border-gray-700"),E(r,"class",_="fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 "+(e[1]?"translate-x-0":"-translate-x-full"))},m(s,c){P&&P.m(s,c),$(s,t,c),$(s,r,c),y(r,n),y(n,a),y(a,o),C(l,o,null),y(a,i),y(a,m),y(n,g),y(n,p),C(f,p,null),y(r,x),y(r,h),y(h,b);for(let e=0;e<H.length;e+=1)H[e]&&H[e].m(b,null);y(r,w),y(r,v),M=!0,z||(U=S(p,"click",e[4]),z=!0)},p(e,[n]){e[1]?P?P.p(e,n):(P=$r(e),P.c(),P.m(t.parentNode,t)):P&&(P.d(1),P=null),13&n&&(W=s(e[2]),L(),H=D(H,n,I,1,e,W,R,b,A,yr,null,xr),j()),(!M||2&n&&_!==(_="fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 "+(e[1]?"translate-x-0":"-translate-x-full")))&&E(r,"class",_)},i(e){if(!M){u(l.$$.fragment,e),u(f.$$.fragment,e);for(let e=0;e<W.length;e+=1)u(H[e]);M=!0}},o(e){d(l.$$.fragment,e),d(f.$$.fragment,e);for(let t=0;t<H.length;t+=1)d(H[t]);M=!1},d(e){e&&(c(t),c(r)),P&&P.d(e),k(l),k(f);for(let t=0;t<H.length;t+=1)H[t].d();z=!1,U()}}}const br=()=>{};function wr(e,t,r){let{currentPage:n="dashboard"}=t,{sidebarOpen:a=!1}=t;const s=R(),o=[{id:"dashboard",label:"Панель",icon:tt},{id:"cameras",label:"Камеры",icon:Se},{id:"events",label:"События",icon:fe},{id:"settings",label:"Настройки",icon:Ot}];function l(e){s("navigate",e)}return e.$$set=e=>{"currentPage"in e&&r(0,n=e.currentPage),"sidebarOpen"in e&&r(1,a=e.sidebarOpen)},[n,a,o,l,function(){s("toggle")},e=>l(e.id)]}class vr extends n{constructor(e){super(),a(this,e,wr,hr,r,{currentPage:0,sidebarOpen:1})}}function kr(e){let t,r,n,a,s,o;return n=new Ve({props:{size:e[2]?24:32,class:"mx-auto mb-2"}}),{c(){t=T("div"),r=T("div"),N(n.$$.fragment),a=O(),s=T("p"),s.textContent="Нет изображения",E(s,"class","text-sm"),E(r,"class","text-center"),E(t,"class","w-full h-full flex items-center justify-center text-gray-400")},m(e,l){$(e,t,l),y(t,r),C(n,r,null),y(r,a),y(r,s),o=!0},p(e,t){const r={};4&t&&(r.size=e[2]?24:32),n.$set(r)},i(e){o||(u(n.$$.fragment,e),o=!0)},o(e){d(n.$$.fragment,e),o=!1},d(e){e&&c(t),k(n)}}}function _r(e){let r,n,a,s,o;return{c(){r=T("img"),I(r.src,n="/api/streaming/cameras/"+e[0].id+"/snapshot")||E(r,"src",n),E(r,"alt",a="Camera "+e[0].name),E(r,"class","w-full h-full object-cover")},m(t,n){$(t,r,n),s||(o=S(r,"error",e[5]),s=!0)},p(e,t){1&t&&!I(r.src,n="/api/streaming/cameras/"+e[0].id+"/snapshot")&&E(r,"src",n),1&t&&a!==(a="Camera "+e[0].name)&&E(r,"alt",a)},i:t,o:t,d(e){e&&c(r),s=!1,o()}}}function Cr(e){let t;return{c(){t=T("div"),t.innerHTML='<span class="text-white text-xs font-medium">Движение</span>',E(t,"class","bg-warning-500 bg-opacity-80 rounded px-2 py-1")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Nr(e){let t;return{c(){t=T("div"),t.innerHTML='<span class="text-white text-xs font-medium">ИИ</span>',E(t,"class","bg-primary-500 bg-opacity-80 rounded px-2 py-1")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Mr(e){let t,r,n,a,s,o,l;const i=[Lr,zr],m=[];function g(e,t){return e[4]?0:1}return n=g(e),a=m[n]=i[n](e),{c(){t=T("div"),r=T("button"),a.c(),E(r,"class","bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-3 transition-all"),E(t,"class","absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-30")},m(a,c){$(a,t,c),y(t,r),m[n].m(r,null),s=!0,o||(l=S(r,"click",e[6]),o=!0)},p(e,t){let s=n;n=g(e),n!==s&&(L(),d(m[s],1,1,()=>{m[s]=null}),j(),a=m[n],a||(a=m[n]=i[n](e),a.c()),u(a,1),a.m(r,null))},i(e){s||(u(a),s=!0)},o(e){d(a),s=!1},d(e){e&&c(t),m[n].d(),o=!1,l()}}}function zr(e){let t,r;return t=new $t({props:{size:24,class:"text-gray-800 ml-1"}}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Lr(e){let t,r;return t=new gt({props:{size:24,class:"text-gray-800"}}),{c(){N(t.$$.fragment)},m(e,n){C(t,e,n),r=!0},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){d(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function jr(e){let t;return{c(){t=T("div"),t.innerHTML='<div class="flex items-center space-x-1 bg-danger-500 rounded px-2 py-1"><div class="w-2 h-2 bg-white rounded-full animate-pulse"></div> <span class="text-white text-xs font-bold">LIVE</span></div>',E(t,"class","absolute bottom-2 left-2")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Sr(e){let r,n,a,s,o,l,i,m,g;return a=new Ot({props:{size:16}}),l=new Rt({props:{size:16}}),{c(){r=T("div"),n=T("button"),N(a.$$.fragment),s=O(),o=T("button"),N(l.$$.fragment),E(n,"class","p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),E(n,"title","Настройки"),E(o,"class","p-1 text-gray-500 hover:text-danger-600 dark:text-gray-400 dark:hover:text-danger-400"),E(o,"title","Удалить"),E(r,"class","flex space-x-1")},m(t,c){$(t,r,c),y(r,n),C(a,n,null),y(r,s),y(r,o),C(l,o,null),i=!0,m||(g=S(o,"click",e[7]),m=!0)},p:t,i(e){i||(u(a.$$.fragment,e),u(l.$$.fragment,e),i=!0)},o(e){d(a.$$.fragment,e),d(l.$$.fragment,e),i=!1},d(e){e&&c(r),k(a),k(l),m=!1,g()}}}function Tr(e){let t,r,n,a,s,o,l,i=Ir(e[0].status)+"",d=e[0].motion_detection&&Ur(),u=e[0].ai_detection&&Er();return{c(){t=T("div"),r=T("span"),n=U(i),s=O(),o=T("div"),d&&d.c(),l=O(),u&&u.c(),E(r,"class",a="font-medium "+("online"===e[0].status?"text-success-600":"text-gray-500")),E(o,"class","flex space-x-1"),E(t,"class","flex items-center justify-between text-sm text-gray-600 dark:text-gray-400")},m(e,a){$(e,t,a),y(t,r),y(r,n),y(t,s),y(t,o),d&&d.m(o,null),y(o,l),u&&u.m(o,null)},p(e,t){1&t&&i!==(i=Ir(e[0].status)+"")&&z(n,i),1&t&&a!==(a="font-medium "+("online"===e[0].status?"text-success-600":"text-gray-500"))&&E(r,"class",a),e[0].motion_detection?d||(d=Ur(),d.c(),d.m(o,l)):d&&(d.d(1),d=null),e[0].ai_detection?u||(u=Er(),u.c(),u.m(o,null)):u&&(u.d(1),u=null)},d(e){e&&c(t),d&&d.d(),u&&u.d()}}}function Or(e){let t,r,n,a,s,o,l,i,d,u,m,g,p,f,x,h=Ir(e[0].status)+"",b=e[0].last_seen&&Hr(e),w=e[0].motion_detection&&Rr(),v=e[0].ai_detection&&Dr(),k=!e[0].motion_detection&&!e[0].ai_detection&&Pr();return{c(){t=T("div"),r=T("div"),n=T("span"),n.textContent="Статус:",a=O(),s=T("span"),o=U(h),i=O(),b&&b.c(),d=O(),u=T("div"),m=T("span"),m.textContent="Детекция:",g=O(),p=T("div"),w&&w.c(),f=O(),v&&v.c(),x=O(),k&&k.c(),E(s,"class",l="font-medium "+("online"===e[0].status?"text-success-600":"text-gray-500")),E(r,"class","flex justify-between"),E(p,"class","flex space-x-2"),E(u,"class","flex justify-between"),E(t,"class","space-y-2 text-sm text-gray-600 dark:text-gray-400")},m(e,l){$(e,t,l),y(t,r),y(r,n),y(r,a),y(r,s),y(s,o),y(t,i),b&&b.m(t,null),y(t,d),y(t,u),y(u,m),y(u,g),y(u,p),w&&w.m(p,null),y(p,f),v&&v.m(p,null),y(p,x),k&&k.m(p,null)},p(e,r){1&r&&h!==(h=Ir(e[0].status)+"")&&z(o,h),1&r&&l!==(l="font-medium "+("online"===e[0].status?"text-success-600":"text-gray-500"))&&E(s,"class",l),e[0].last_seen?b?b.p(e,r):(b=Hr(e),b.c(),b.m(t,d)):b&&(b.d(1),b=null),e[0].motion_detection?w||(w=Rr(),w.c(),w.m(p,f)):w&&(w.d(1),w=null),e[0].ai_detection?v||(v=Dr(),v.c(),v.m(p,x)):v&&(v.d(1),v=null),e[0].motion_detection||e[0].ai_detection?k&&(k.d(1),k=null):k||(k=Pr(),k.c(),k.m(p,null))},d(e){e&&c(t),b&&b.d(),w&&w.d(),v&&v.d(),k&&k.d()}}}function Ur(e){let t;return{c(){t=T("span"),t.textContent="M",E(t,"class","text-warning-600")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Er(e){let t;return{c(){t=T("span"),t.textContent="AI",E(t,"class","text-primary-600")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Hr(e){let t,r,n,a,s,o=Vr(e[0].last_seen)+"";return{c(){t=T("div"),r=T("span"),r.textContent="Последний раз:",n=O(),a=T("span"),s=U(o),E(a,"class","font-medium"),E(t,"class","flex justify-between")},m(e,o){$(e,t,o),y(t,r),y(t,n),y(t,a),y(a,s)},p(e,t){1&t&&o!==(o=Vr(e[0].last_seen)+"")&&z(s,o)},d(e){e&&c(t)}}}function Rr(e){let t;return{c(){t=T("span"),t.textContent="Движение",E(t,"class","text-warning-600 font-medium")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Dr(e){let t;return{c(){t=T("span"),t.textContent="ИИ",E(t,"class","text-primary-600 font-medium")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Pr(e){let t;return{c(){t=T("span"),t.textContent="Выключена",E(t,"class","text-gray-500")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Wr(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,b,w,v,k,_,C,N,M,S,H,R,D,P,W=Ir(e[0].status)+"",A=e[0].name+"";const I=[_r,kr],V=[];function B(e,t){return e[3]?1:0}n=B(e),a=V[n]=I[n](e);let J=e[0].motion_detection&&Cr(),F=e[0].ai_detection&&Nr(),G=!e[2]&&Mr(e),q="online"===e[0].status&&jr(),K=e[1]&&!e[2]&&Sr(e);function Z(e,t){return e[2]?Tr:Or}let Q=Z(e),X=Q(e);return{c(){t=T("div"),r=T("div"),a.c(),s=O(),o=T("div"),l=T("div"),i=T("div"),g=O(),p=T("span"),f=U(W),x=O(),h=T("div"),J&&J.c(),b=O(),F&&F.c(),w=O(),G&&G.c(),v=O(),q&&q.c(),_=O(),C=T("div"),N=T("div"),M=T("h3"),S=U(A),H=O(),K&&K.c(),R=O(),X.c(),E(i,"class",m="w-2 h-2 rounded-full "+Ar(e[0].status)),E(p,"class","text-white text-xs font-medium"),E(l,"class","flex items-center space-x-1 bg-black bg-opacity-50 rounded-full px-2 py-1"),E(o,"class","absolute top-2 left-2 flex items-center space-x-2"),E(h,"class","absolute top-2 right-2 flex space-x-1"),E(r,"class",k="relative "+(e[2]?"aspect-video h-32":"aspect-video h-48")+" bg-gray-900"),E(M,"class","text-lg font-medium text-gray-900 dark:text-white truncate"),E(N,"class","flex items-center justify-between mb-2"),E(C,"class","p-4"),E(t,"class",D="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden "+(e[2]?"min-h-0":"min-h-[300px]"))},m(e,a){$(e,t,a),y(t,r),V[n].m(r,null),y(r,s),y(r,o),y(o,l),y(l,i),y(l,g),y(l,p),y(p,f),y(r,x),y(r,h),J&&J.m(h,null),y(h,b),F&&F.m(h,null),y(r,w),G&&G.m(r,null),y(r,v),q&&q.m(r,null),y(t,_),y(t,C),y(C,N),y(N,M),y(M,S),y(N,H),K&&K.m(N,null),y(C,R),X.m(C,null),P=!0},p(e,[o]){let l=n;n=B(e),n===l?V[n].p(e,o):(L(),d(V[l],1,1,()=>{V[l]=null}),j(),a=V[n],a?a.p(e,o):(a=V[n]=I[n](e),a.c()),u(a,1),a.m(r,s)),(!P||1&o&&m!==(m="w-2 h-2 rounded-full "+Ar(e[0].status)))&&E(i,"class",m),(!P||1&o)&&W!==(W=Ir(e[0].status)+"")&&z(f,W),e[0].motion_detection?J||(J=Cr(),J.c(),J.m(h,b)):J&&(J.d(1),J=null),e[0].ai_detection?F||(F=Nr(),F.c(),F.m(h,null)):F&&(F.d(1),F=null),e[2]?G&&(L(),d(G,1,1,()=>{G=null}),j()):G?(G.p(e,o),4&o&&u(G,1)):(G=Mr(e),G.c(),u(G,1),G.m(r,v)),"online"===e[0].status?q||(q=jr(),q.c(),q.m(r,null)):q&&(q.d(1),q=null),(!P||4&o&&k!==(k="relative "+(e[2]?"aspect-video h-32":"aspect-video h-48")+" bg-gray-900"))&&E(r,"class",k),(!P||1&o)&&A!==(A=e[0].name+"")&&z(S,A),e[1]&&!e[2]?K?(K.p(e,o),6&o&&u(K,1)):(K=Sr(e),K.c(),u(K,1),K.m(N,null)):K&&(L(),d(K,1,1,()=>{K=null}),j()),Q===(Q=Z(e))&&X?X.p(e,o):(X.d(1),X=Q(e),X&&(X.c(),X.m(C,null))),(!P||4&o&&D!==(D="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden "+(e[2]?"min-h-0":"min-h-[300px]")))&&E(t,"class",D)},i(e){P||(u(a),u(G),u(K),P=!0)},o(e){d(a),d(G),d(K),P=!1},d(e){e&&c(t),V[n].d(),J&&J.d(),F&&F.d(),G&&G.d(),q&&q.d(),K&&K.d(),X.d()}}}function Ar(e){switch(e){case"online":return"bg-success-500";case"offline":default:return"bg-gray-500";case"error":return"bg-danger-500"}}function Ir(e){switch(e){case"online":return"Онлайн";case"offline":return"Офлайн";case"error":return"Ошибка";default:return"Неизвестно"}}function Vr(e){if(!e)return"Никогда";return new Date(e).toLocaleString("ru-RU")}function Br(e,t,r){let{camera:n}=t,{showControls:a=!0}=t,{compact:s=!1}=t,o=!1,l=!1;return e.$$set=e=>{"camera"in e&&r(0,n=e.camera),"showControls"in e&&r(1,a=e.showControls),"compact"in e&&r(2,s=e.compact)},[n,a,s,o,l,function(){r(3,o=!0)},async function(){r(4,l=!l)},async function(){if(confirm(`Удалить камеру "${n.name}"?`))try{(await fetch(`/api/cameras/${n.id}`,{method:"DELETE"})).ok||alert("Ошибка при удалении камеры")}catch(e){console.error("Delete camera error:",e),alert("Ошибка при удалении камеры")}}]}class Jr extends n{constructor(e){super(),a(this,e,Br,Wr,r,{camera:0,showControls:1,compact:2})}}function Fr(e){let t,r,n,a=Math.round(100*e[0].confidence)+"";return{c(){t=T("div"),r=U(a),n=U("%"),E(t,"class","text-sm text-gray-600 dark:text-gray-400")},m(e,a){$(e,t,a),y(t,r),y(t,n)},p(e,t){1&t&&a!==(a=Math.round(100*e[0].confidence)+"")&&z(r,a)},d(e){e&&c(t)}}}function Gr(e){let t,r,n,a,s,o,l,i,m,g,p=e[0].video_path&&qr(e);return a=new Ge({props:{size:16}}),l=new Rt({props:{size:16}}),{c(){t=T("div"),p&&p.c(),r=O(),n=T("button"),N(a.$$.fragment),s=O(),o=T("button"),N(l.$$.fragment),E(n,"class","p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),E(n,"title","Подробности"),E(o,"class","p-1 text-gray-500 hover:text-danger-600 dark:text-gray-400 dark:hover:text-danger-400"),E(o,"title","Удалить"),E(t,"class","flex space-x-1")},m(c,d){$(c,t,d),p&&p.m(t,null),y(t,r),y(t,n),C(a,n,null),y(t,s),y(t,o),C(l,o,null),i=!0,m||(g=S(o,"click",e[4]),m=!0)},p(e,n){e[0].video_path?p?(p.p(e,n),1&n&&u(p,1)):(p=qr(e),p.c(),u(p,1),p.m(t,r)):p&&(L(),d(p,1,1,()=>{p=null}),j())},i(e){i||(u(p),u(a.$$.fragment,e),u(l.$$.fragment,e),i=!0)},o(e){d(p),d(a.$$.fragment,e),d(l.$$.fragment,e),i=!1},d(e){e&&c(t),p&&p.d(),k(a),k(l),m=!1,g()}}}function qr(e){let r,n,a,s,o;return n=new Pe({props:{size:16}}),{c(){r=T("button"),N(n.$$.fragment),E(r,"class","p-1 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400"),E(r,"title","Скачать видео")},m(t,l){$(t,r,l),C(n,r,null),a=!0,s||(o=S(r,"click",e[3]),s=!0)},p:t,i(e){a||(u(n.$$.fragment,e),a=!0)},o(e){d(n.$$.fragment,e),a=!1},d(e){e&&c(r),k(n),s=!1,o()}}}function Kr(e){let t,r,n;return{c(){t=T("div"),r=T("img"),I(r.src,n=e[0].thumbnail_path)||E(r,"src",n),E(r,"alt","Event thumbnail"),E(r,"class","w-20 h-16 object-cover rounded border border-gray-200 dark:border-gray-600"),E(t,"class","flex-shrink-0")},m(e,n){$(e,t,n),y(t,r)},p(e,t){1&t&&!I(r.src,n=e[0].thumbnail_path)&&E(r,"src",n)},d(e){e&&c(t)}}}function Zr(e){let t,r,n=e[0].description+"";return{c(){t=T("p"),r=U(n),E(t,"class","text-sm text-gray-600 dark:text-gray-400 mt-1")},m(e,n){$(e,t,n),y(t,r)},p(e,t){1&t&&n!==(n=e[0].description+"")&&z(r,n)},d(e){e&&c(t)}}}function Qr(e){let t;return{c(){t=T("span"),t.textContent="Обработка",E(t,"class","inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200")},m(e,r){$(e,t,r)},d(e){e&&c(t)}}}function Xr(e){let r,n,a,s,o,l,i,m,g,p;return l=new Pe({props:{size:14,class:"mr-1"}}),{c(){r=T("div"),n=T("div"),a=T("span"),a.textContent="Видеозапись доступна",s=O(),o=T("button"),N(l.$$.fragment),i=U("\n          Скачать"),E(a,"class","text-sm text-gray-600 dark:text-gray-400"),E(o,"class","inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 dark:bg-primary-900 dark:text-primary-300 dark:hover:bg-primary-800"),E(n,"class","flex items-center justify-between"),E(r,"class","border-t border-gray-200 dark:border-gray-700 p-4")},m(t,c){$(t,r,c),y(r,n),y(n,a),y(n,s),y(n,o),C(l,o,null),y(o,i),m=!0,g||(p=S(o,"click",e[3]),g=!0)},p:t,i(e){m||(u(l.$$.fragment,e),m=!0)},o(e){d(l.$$.fragment,e),m=!1},d(e){e&&c(r),k(l),g=!1,p()}}}function Yr(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,b,w,v,_,M,S,H,R,D,P,A,I,V,B,J=tn(e[0].type)+"",F=e[0].camera_name+"",G=(e[1]?nn(e[0].created_at):rn(e[0].created_at))+"";var q=e[2](e[0].type);q&&(o=W(q,{props:{size:12}}));let K=e[0].confidence&&Fr(e),Z=!e[1]&&Gr(e),Q=e[0].thumbnail_path&&!e[1]&&Kr(e),X=e[0].description&&Zr(e),Y=!e[0].processed&&Qr(),ee=!e[1]&&e[0].video_path&&Xr(e);return{c(){t=T("div"),r=T("div"),n=T("div"),a=T("div"),s=T("div"),o&&N(o.$$.fragment),l=O(),i=T("span"),m=U(J),p=O(),K&&K.c(),f=O(),Z&&Z.c(),x=O(),h=T("div"),Q&&Q.c(),b=O(),w=T("div"),v=T("div"),_=T("h4"),M=U(F),S=O(),X&&X.c(),H=O(),R=T("div"),D=T("span"),P=U(G),A=O(),Y&&Y.c(),I=O(),ee&&ee.c(),E(s,"class",g="flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium border "+en(e[0].type)),E(a,"class","flex items-center space-x-3"),E(n,"class","flex items-start justify-between mb-3"),E(_,"class","text-sm font-medium text-gray-900 dark:text-white"),E(v,"class","mb-2"),E(R,"class","flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"),E(w,"class","flex-1 min-w-0"),E(h,"class","flex space-x-4"),E(r,"class","p-4"),E(t,"class",V="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden "+(e[1]?"":"mb-4"))},m(e,c){$(e,t,c),y(t,r),y(r,n),y(n,a),y(a,s),o&&C(o,s,null),y(s,l),y(s,i),y(i,m),y(a,p),K&&K.m(a,null),y(n,f),Z&&Z.m(n,null),y(r,x),y(r,h),Q&&Q.m(h,null),y(h,b),y(h,w),y(w,v),y(v,_),y(_,M),y(v,S),X&&X.m(v,null),y(w,H),y(w,R),y(R,D),y(D,P),y(R,A),Y&&Y.m(R,null),y(t,I),ee&&ee.m(t,null),B=!0},p(e,[r]){if(1&r&&q!==(q=e[2](e[0].type))){if(o){L();const e=o;d(e.$$.fragment,1,0,()=>{k(e,1)}),j()}q?(o=W(q,{props:{size:12}}),N(o.$$.fragment),u(o.$$.fragment,1),C(o,s,l)):o=null}(!B||1&r)&&J!==(J=tn(e[0].type)+"")&&z(m,J),(!B||1&r&&g!==(g="flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium border "+en(e[0].type)))&&E(s,"class",g),e[0].confidence?K?K.p(e,r):(K=Fr(e),K.c(),K.m(a,null)):K&&(K.d(1),K=null),e[1]?Z&&(L(),d(Z,1,1,()=>{Z=null}),j()):Z?(Z.p(e,r),2&r&&u(Z,1)):(Z=Gr(e),Z.c(),u(Z,1),Z.m(n,null)),e[0].thumbnail_path&&!e[1]?Q?Q.p(e,r):(Q=Kr(e),Q.c(),Q.m(h,b)):Q&&(Q.d(1),Q=null),(!B||1&r)&&F!==(F=e[0].camera_name+"")&&z(M,F),e[0].description?X?X.p(e,r):(X=Zr(e),X.c(),X.m(v,null)):X&&(X.d(1),X=null),(!B||3&r)&&G!==(G=(e[1]?nn(e[0].created_at):rn(e[0].created_at))+"")&&z(P,G),e[0].processed?Y&&(Y.d(1),Y=null):Y||(Y=Qr(),Y.c(),Y.m(R,null)),!e[1]&&e[0].video_path?ee?(ee.p(e,r),3&r&&u(ee,1)):(ee=Xr(e),ee.c(),u(ee,1),ee.m(t,null)):ee&&(L(),d(ee,1,1,()=>{ee=null}),j()),(!B||2&r&&V!==(V="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden "+(e[1]?"":"mb-4")))&&E(t,"class",V)},i(e){B||(o&&u(o.$$.fragment,e),u(Z),u(ee),B=!0)},o(e){o&&d(o.$$.fragment,e),d(Z),d(ee),B=!1},d(e){e&&c(t),o&&k(o),K&&K.d(),Z&&Z.d(),Q&&Q.d(),X&&X.d(),Y&&Y.d(),ee&&ee.d()}}}function en(e){switch(e){case"motion":return"text-warning-600 bg-warning-100 border-warning-200";case"ai_detection":return"text-primary-600 bg-primary-100 border-primary-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}}function tn(e){switch(e){case"motion":return"Движение";case"ai_detection":return"ИИ детекция";default:return"Событие"}}function rn(e){return new Date(e).toLocaleString("ru-RU")}function nn(e){return new Date(e).toLocaleTimeString("ru-RU")}function an(e,t,r){let{event:n}=t,{compact:a=!1}=t;return e.$$set=e=>{"event"in e&&r(0,n=e.event),"compact"in e&&r(1,a=e.compact)},[n,a,function(e){return fe},async function(){n.video_path&&window.open(n.video_path,"_blank")},async function(){if(confirm("Удалить это событие?"))try{(await fetch(`/api/events/${n.id}`,{method:"DELETE"})).ok||alert("Ошибка при удалении события")}catch(e){console.error("Delete event error:",e),alert("Ошибка при удалении события")}}]}class sn extends n{constructor(e){super(),a(this,e,an,Yr,r,{event:0,compact:1})}}function on(e,t,r){const n=e.slice();return n[8]=t[r],n}function ln(e,t,r){const n=e.slice();return n[11]=t[r],n}function cn(e){let r,n,a,s,o,l,i,m,g,p,f,x,h,b;return n=new Se({props:{class:"mx-auto h-12 w-12 text-gray-400"}}),p=new Se({props:{class:"-ml-1 mr-2 h-5 w-5"}}),{c(){r=T("div"),N(n.$$.fragment),a=O(),s=T("h3"),s.textContent="Нет активных камер",o=O(),l=T("p"),l.textContent="Добавьте камеру для начала мониторинга",i=O(),m=T("div"),g=T("button"),N(p.$$.fragment),f=U("\n                Добавить камеру"),E(s,"class","mt-2 text-sm font-medium text-gray-900 dark:text-white"),E(l,"class","mt-1 text-sm text-gray-500 dark:text-gray-400"),E(g,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),E(m,"class","mt-6"),E(r,"class","text-center py-8")},m(t,c){$(t,r,c),C(n,r,null),y(r,a),y(r,s),y(r,o),y(r,l),y(r,i),y(r,m),y(m,g),C(p,g,null),y(g,f),x=!0,h||(b=S(g,"click",e[6]),h=!0)},p:t,i(e){x||(u(n.$$.fragment,e),u(p.$$.fragment,e),x=!0)},o(e){d(n.$$.fragment,e),d(p.$$.fragment,e),x=!1},d(e){e&&c(r),k(n),k(p),h=!1,b()}}}function dn(e){let t,r,n,a,o=[],l=new Map,i=s(e[2]);const m=e=>e[11].id;for(let s=0;s<i.length;s+=1){let t=ln(e,i,s),r=m(t);l.set(r,o[s]=un(r,t))}let g=e[0].length>4&&mn(e);return{c(){t=T("div");for(let e=0;e<o.length;e+=1)o[e].c();r=O(),g&&g.c(),n=b(),E(t,"class","grid grid-cols-1 sm:grid-cols-2 gap-4")},m(e,s){$(e,t,s);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(t,null);$(e,r,s),g&&g.m(e,s),$(e,n,s),a=!0},p(e,r){4&r&&(i=s(e[2]),L(),o=D(o,r,m,1,e,i,l,t,A,un,null,ln),j()),e[0].length>4?g?g.p(e,r):(g=mn(e),g.c(),g.m(n.parentNode,n)):g&&(g.d(1),g=null)},i(e){if(!a){for(let e=0;e<i.length;e+=1)u(o[e]);a=!0}},o(e){for(let t=0;t<o.length;t+=1)d(o[t]);a=!1},d(e){e&&(c(t),c(r),c(n));for(let t=0;t<o.length;t+=1)o[t].d();g&&g.d(e)}}}function un(e,t){let r,n,a;return n=new Jr({props:{camera:t[11],showControls:!1}}),{key:e,first:null,c(){r=b(),N(n.$$.fragment),this.first=r},m(e,t){$(e,r,t),C(n,e,t),a=!0},p(e,r){t=e;const a={};4&r&&(a.camera=t[11]),n.$set(a)},i(e){a||(u(n.$$.fragment,e),a=!0)},o(e){d(n.$$.fragment,e),a=!1},d(e){e&&c(r),k(n,e)}}}function mn(e){let t,r,n,a,s,o,l,i=e[0].length+"";return{c(){t=T("div"),r=T("button"),n=U("Показать все камеры ("),a=U(i),s=U(")"),E(r,"class","text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 text-sm font-medium"),E(t,"class","mt-4 text-center")},m(c,i){$(c,t,i),y(t,r),y(r,n),y(r,a),y(r,s),o||(l=S(r,"click",e[5]),o=!0)},p(e,t){1&t&&i!==(i=e[0].length+"")&&z(a,i)},d(e){e&&c(t),o=!1,l()}}}function gn(e){let r,n,a,s,o,l,i;return n=new fe({props:{class:"mx-auto h-12 w-12 text-gray-400"}}),{c(){r=T("div"),N(n.$$.fragment),a=O(),s=T("h3"),s.textContent="Нет событий",o=O(),l=T("p"),l.textContent="События будут отображаться здесь после обнаружения",E(s,"class","mt-2 text-sm font-medium text-gray-900 dark:text-white"),E(l,"class","mt-1 text-sm text-gray-500 dark:text-gray-400"),E(r,"class","text-center py-8")},m(e,t){$(e,r,t),C(n,r,null),y(r,a),y(r,s),y(r,o),y(r,l),i=!0},p:t,i(e){i||(u(n.$$.fragment,e),i=!0)},o(e){d(n.$$.fragment,e),i=!1},d(e){e&&c(r),k(n)}}}function pn(e){let t,r,n,a,o,l,i,m=[],g=new Map,p=s(e[1]);const f=e=>e[8].id;for(let s=0;s<p.length;s+=1){let t=on(e,p,s),r=f(t);g.set(r,m[s]=fn(r,t))}return{c(){t=T("div");for(let e=0;e<m.length;e+=1)m[e].c();r=O(),n=T("div"),a=T("button"),a.textContent="Показать все события",E(t,"class","space-y-4"),E(a,"class","text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 text-sm font-medium"),E(n,"class","mt-4 text-center")},m(s,c){$(s,t,c);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(t,null);$(s,r,c),$(s,n,c),y(n,a),o=!0,l||(i=S(a,"click",e[7]),l=!0)},p(e,r){2&r&&(p=s(e[1]),L(),m=D(m,r,f,1,e,p,g,t,A,fn,null,on),j())},i(e){if(!o){for(let e=0;e<p.length;e+=1)u(m[e]);o=!0}},o(e){for(let t=0;t<m.length;t+=1)d(m[t]);o=!1},d(e){e&&(c(t),c(r),c(n));for(let t=0;t<m.length;t+=1)m[t].d();l=!1,i()}}}function fn(e,t){let r,n,a;return n=new sn({props:{event:t[8],compact:!0}}),{key:e,first:null,c(){r=b(),N(n.$$.fragment),this.first=r},m(e,t){$(e,r,t),C(n,e,t),a=!0},p(e,r){t=e;const a={};2&r&&(a.event=t[8]),n.$set(a)},i(e){a||(u(n.$$.fragment,e),a=!0)},o(e){d(n.$$.fragment,e),a=!1},d(e){e&&c(r),k(n,e)}}}function xn(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,b,w,v,_,M,S,H,R,D,P,W,A,I,V,B,J,F,G,q,K,Z,Q,X,Y,ee,te,re,ne,ae,se,oe,le,ce,ie,de,ue,me,ge,pe,xe,$e,ye,be,we,ve,ke,_e,Ce,Ne,Me,ze,Le,je,Te,Oe,Ue,He,Re,De,Pe,We,Ae,Ie,Ve,Be,Je,Fe,Ge,qe,Ke=(e[3].cameras_total||0)+"",Ze=(e[3].cameras_online||0)+"",Qe=(e[3].events_today||0)+"",Xe=(e[3].events_total||0)+"",Ye=$n(e[3].system_uptime)+"",et=e[2].length+"",tt=e[0].length+"";p=new Se({props:{class:"h-8 w-8 text-primary-600"}}),A=new fe({props:{class:"h-8 w-8 text-warning-600"}}),ee=new he({props:{class:"h-8 w-8 text-danger-600"}}),ge=new Ee({props:{class:"h-8 w-8 text-success-600"}});const rt=[dn,cn],nt=[];function at(e,t){return e[2].length>0?0:1}Pe=at(e),We=nt[Pe]=rt[Pe](e);const st=[pn,gn],ot=[];function lt(e,t){return e[1].length>0?0:1}return Fe=lt(e),Ge=ot[Fe]=st[Fe](e),{c(){t=T("div"),r=T("div"),n=T("h2"),n.textContent="Панель управления",a=O(),s=T("div"),s.textContent=`Последнее обновление: ${(new Date).toLocaleTimeString("ru-RU")}`,o=O(),l=T("div"),i=T("div"),m=T("div"),g=T("div"),N(p.$$.fragment),f=O(),x=T("div"),h=T("p"),h.textContent="Камеры",b=O(),w=T("p"),v=U(Ke),_=O(),M=T("p"),S=U(Ze),H=U(" онлайн"),R=O(),D=T("div"),P=T("div"),W=T("div"),N(A.$$.fragment),I=O(),V=T("div"),B=T("p"),B.textContent="События сегодня",J=O(),F=T("p"),G=U(Qe),q=O(),K=T("p"),K.textContent="За последние 24ч",Z=O(),Q=T("div"),X=T("div"),Y=T("div"),N(ee.$$.fragment),te=O(),re=T("div"),ne=T("p"),ne.textContent="Всего событий",ae=O(),se=T("p"),oe=U(Xe),le=O(),ce=T("p"),ce.textContent="За все время",ie=O(),de=T("div"),ue=T("div"),me=T("div"),N(ge.$$.fragment),pe=O(),xe=T("div"),$e=T("p"),$e.textContent="Время работы",ye=O(),be=T("p"),we=U(Ye),ve=O(),ke=T("p"),ke.textContent="Система стабильна",_e=O(),Ce=T("div"),Ne=T("div"),Me=T("div"),ze=T("div"),Le=T("h3"),Le.textContent="Активные камеры",je=O(),Te=T("span"),Oe=U(et),Ue=U(" из "),He=U(tt),Re=O(),De=T("div"),We.c(),Ae=O(),Ie=T("div"),Ve=T("div"),Ve.innerHTML='<div class="flex items-center justify-between"><h3 class="text-lg font-medium text-gray-900 dark:text-white">Последние события</h3> <span class="text-sm text-gray-500 dark:text-gray-400">Топ 5</span></div>',Be=O(),Je=T("div"),Ge.c(),E(n,"class","text-2xl font-bold text-gray-900 dark:text-white"),E(s,"class","text-sm text-gray-500 dark:text-gray-400"),E(r,"class","flex items-center justify-between"),E(g,"class","flex-shrink-0"),E(h,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(w,"class","text-2xl font-semibold text-gray-900 dark:text-white"),E(M,"class","text-xs text-success-600"),E(x,"class","ml-4"),E(m,"class","flex items-center"),E(i,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(W,"class","flex-shrink-0"),E(B,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(F,"class","text-2xl font-semibold text-gray-900 dark:text-white"),E(K,"class","text-xs text-gray-600 dark:text-gray-400"),E(V,"class","ml-4"),E(P,"class","flex items-center"),E(D,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(Y,"class","flex-shrink-0"),E(ne,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(se,"class","text-2xl font-semibold text-gray-900 dark:text-white"),E(ce,"class","text-xs text-gray-600 dark:text-gray-400"),E(re,"class","ml-4"),E(X,"class","flex items-center"),E(Q,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(me,"class","flex-shrink-0"),E($e,"class","text-sm font-medium text-gray-500 dark:text-gray-400"),E(be,"class","text-2xl font-semibold text-gray-900 dark:text-white"),E(ke,"class","text-xs text-success-600"),E(xe,"class","ml-4"),E(ue,"class","flex items-center"),E(de,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(l,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"),E(Le,"class","text-lg font-medium text-gray-900 dark:text-white"),E(Te,"class","text-sm text-gray-500 dark:text-gray-400"),E(ze,"class","flex items-center justify-between"),E(Me,"class","p-6 border-b border-gray-200 dark:border-gray-700"),E(De,"class","p-6"),E(Ne,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"),E(Ve,"class","p-6 border-b border-gray-200 dark:border-gray-700"),E(Je,"class","p-6"),E(Ie,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"),E(Ce,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),E(t,"class","space-y-6")},m(e,c){$(e,t,c),y(t,r),y(r,n),y(r,a),y(r,s),y(t,o),y(t,l),y(l,i),y(i,m),y(m,g),C(p,g,null),y(m,f),y(m,x),y(x,h),y(x,b),y(x,w),y(w,v),y(x,_),y(x,M),y(M,S),y(M,H),y(l,R),y(l,D),y(D,P),y(P,W),C(A,W,null),y(P,I),y(P,V),y(V,B),y(V,J),y(V,F),y(F,G),y(V,q),y(V,K),y(l,Z),y(l,Q),y(Q,X),y(X,Y),C(ee,Y,null),y(X,te),y(X,re),y(re,ne),y(re,ae),y(re,se),y(se,oe),y(re,le),y(re,ce),y(l,ie),y(l,de),y(de,ue),y(ue,me),C(ge,me,null),y(ue,pe),y(ue,xe),y(xe,$e),y(xe,ye),y(xe,be),y(be,we),y(xe,ve),y(xe,ke),y(t,_e),y(t,Ce),y(Ce,Ne),y(Ne,Me),y(Me,ze),y(ze,Le),y(ze,je),y(ze,Te),y(Te,Oe),y(Te,Ue),y(Te,He),y(Ne,Re),y(Ne,De),nt[Pe].m(De,null),y(Ce,Ae),y(Ce,Ie),y(Ie,Ve),y(Ie,Be),y(Ie,Je),ot[Fe].m(Je,null),qe=!0},p(e,[t]){(!qe||8&t)&&Ke!==(Ke=(e[3].cameras_total||0)+"")&&z(v,Ke),(!qe||8&t)&&Ze!==(Ze=(e[3].cameras_online||0)+"")&&z(S,Ze),(!qe||8&t)&&Qe!==(Qe=(e[3].events_today||0)+"")&&z(G,Qe),(!qe||8&t)&&Xe!==(Xe=(e[3].events_total||0)+"")&&z(oe,Xe),(!qe||8&t)&&Ye!==(Ye=$n(e[3].system_uptime)+"")&&z(we,Ye),(!qe||4&t)&&et!==(et=e[2].length+"")&&z(Oe,et),(!qe||1&t)&&tt!==(tt=e[0].length+"")&&z(He,tt);let r=Pe;Pe=at(e),Pe===r?nt[Pe].p(e,t):(L(),d(nt[r],1,1,()=>{nt[r]=null}),j(),We=nt[Pe],We?We.p(e,t):(We=nt[Pe]=rt[Pe](e),We.c()),u(We,1),We.m(De,null));let n=Fe;Fe=lt(e),Fe===n?ot[Fe].p(e,t):(L(),d(ot[n],1,1,()=>{ot[n]=null}),j(),Ge=ot[Fe],Ge?Ge.p(e,t):(Ge=ot[Fe]=st[Fe](e),Ge.c()),u(Ge,1),Ge.m(Je,null))},i(e){qe||(u(p.$$.fragment,e),u(A.$$.fragment,e),u(ee.$$.fragment,e),u(ge.$$.fragment,e),u(We),u(Ge),qe=!0)},o(e){d(p.$$.fragment,e),d(A.$$.fragment,e),d(ee.$$.fragment,e),d(ge.$$.fragment,e),d(We),d(Ge),qe=!1},d(e){e&&c(t),k(p),k(A),k(ee),k(ge),nt[Pe].d(),ot[Fe].d()}}}function $n(e){if(!e)return"0м";const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}ч ${r}м`:`${r}м`}function yn(e,t,r){let n,a,s;H(e,Y,e=>r(0,n=e)),H(e,ee,e=>r(4,a=e)),H(e,X,e=>r(3,s=e));let o=[],l=[];return e.$$.update=()=>{17&e.$$.dirty&&(r(1,o=a.slice(0,5)),r(2,l=n.filter(e=>"online"===e.status).slice(0,4)))},[n,o,l,s,a,()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"cameras"})),()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"cameras"})),()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"events"}))]}class hn extends n{constructor(e){super(),a(this,e,yn,xn,r,{})}}function bn(e){let t,r,n=e[3].name+"";return{c(){t=T("p"),r=U(n),E(t,"class","mt-1 text-sm text-red-600")},m(e,n){$(e,t,n),y(t,r)},p(e,t){8&t&&n!==(n=e[3].name+"")&&z(r,n)},d(e){e&&c(t)}}}function wn(e){let t,r,n=e[3].rtsp_url+"";return{c(){t=T("p"),r=U(n),E(t,"class","mt-1 text-sm text-red-600")},m(e,n){$(e,t,n),y(t,r)},p(e,t){8&t&&n!==(n=e[3].rtsp_url+"")&&z(r,n)},d(e){e&&c(t)}}}function vn(e){let r;return{c(){r=U("Проверить соединение")},m(e,t){$(e,r,t)},i:t,o:t,d(e){e&&c(r)}}}function kn(e){let t,r,n;return t=new st({props:{size:16,class:"mr-2 animate-spin"}}),{c(){N(t.$$.fragment),r=U("\n            Тестирование...")},m(e,a){C(t,e,a),$(e,r,a),n=!0},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){e&&c(r),k(t,e)}}}function _n(e){let t,r,n,a,s=(e[2].message||(e[2].success?"Соединение успешно!":"Ошибка соединения"))+"";return{c(){t=T("div"),r=T("p"),n=U(s),E(r,"class","text-sm"),E(t,"class",a="mt-2 p-3 rounded-md "+(e[2].success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"))},m(e,a){$(e,t,a),y(t,r),y(r,n)},p(e,r){4&r&&s!==(s=(e[2].message||(e[2].success?"Соединение успешно!":"Ошибка соединения"))+"")&&z(n,s),4&r&&a!==(a="mt-2 p-3 rounded-md "+(e[2].success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"))&&E(t,"class",a)},d(e){e&&c(t)}}}function Cn(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,b,w,v,_,H,R,D,P,W,A,I,J,F,G,q,K,Z,Q,X,Y,ee,te,re,ne,ae,se,oe,le,ce,ie,de,ue,me,ge,pe,fe,xe,$e,ye,he,be,we,ve,ke,_e,Ce,Ne,Me,ze,Le,je,Te,Oe,Ue,Ee,He,Re,De,Pe,We,Ae,Ie,Ve,Be,Je,Fe,Ge,qe,Ke,Ze=Math.round(100*e[0].sensitivity)+"";s=new Se({props:{size:24,class:"text-primary-600"}}),g=new Yt({props:{size:20}});let Qe=e[3].name&&bn(e),Xe=e[3].rtsp_url&&wn(e);const Ye=[kn,vn],et=[];function tt(e,t){return e[1]?0:1}ne=tt(e),ae=et[ne]=Ye[ne](e);let rt=e[2]&&_n(e);return{c(){t=T("div"),r=T("div"),n=T("div"),a=T("div"),N(s.$$.fragment),o=O(),l=T("h3"),l.textContent="Добавить камеру",i=O(),m=T("button"),N(g.$$.fragment),p=O(),f=T("div"),x=T("div"),h=T("label"),h.textContent="Название камеры",b=O(),w=T("input"),v=O(),Qe&&Qe.c(),_=O(),H=T("div"),R=T("label"),R.textContent="RTSP URL",D=O(),P=T("input"),W=O(),Xe&&Xe.c(),A=O(),I=T("div"),J=T("div"),F=T("label"),F.textContent="Логин (опционально)",G=O(),q=T("input"),K=O(),Z=T("div"),Q=T("label"),Q.textContent="Пароль (опционально)",X=O(),Y=T("input"),ee=O(),te=T("div"),re=T("button"),ae.c(),oe=O(),rt&&rt.c(),le=O(),ce=T("div"),ie=T("h4"),ie.textContent="Настройки детекции",de=O(),ue=T("div"),me=T("label"),ge=T("input"),pe=O(),fe=T("span"),fe.textContent="Детекция движения",xe=O(),$e=T("label"),ye=T("input"),he=O(),be=T("span"),be.textContent="ИИ детекция объектов",we=O(),ve=T("label"),ke=T("input"),_e=O(),Ce=T("span"),Ce.textContent="Записывать видео при событиях",Ne=O(),Me=T("label"),ze=T("input"),Le=O(),je=T("span"),je.textContent="Уведомления в Telegram",Te=O(),Oe=T("div"),Ue=T("label"),Ee=U("Чувствительность: "),He=U(Ze),Re=U("%"),De=O(),Pe=T("input"),We=O(),Ae=T("div"),Ae.innerHTML="<span>Низкая</span> <span>Высокая</span>",Ie=O(),Ve=T("div"),Be=T("button"),Be.textContent="Отмена",Je=O(),Fe=T("button"),Fe.textContent="Добавить камеру",E(l,"class","text-lg font-medium text-gray-900 dark:text-white"),E(a,"class","flex items-center space-x-3"),E(m,"class","text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),E(n,"class","flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"),E(h,"for","name"),E(h,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(w,"id","name"),E(w,"type","text"),E(w,"placeholder","Например: Входная дверь"),E(w,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),B(w,"border-red-500",e[3].name),E(R,"for","rtsp_url"),E(R,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(P,"id","rtsp_url"),E(P,"type","text"),E(P,"placeholder","rtsp://192.168.1.100:554/stream"),E(P,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),B(P,"border-red-500",e[3].rtsp_url),E(F,"for","username"),E(F,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(q,"id","username"),E(q,"type","text"),E(q,"placeholder","admin"),E(q,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(Q,"for","password"),E(Q,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(Y,"id","password"),E(Y,"type","password"),E(Y,"placeholder","••••••••"),E(Y,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(I,"class","grid grid-cols-2 gap-4"),re.disabled=se=e[1]||!e[0].rtsp_url.trim(),E(re,"class","w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed"),E(ie,"class","text-sm font-medium text-gray-900 dark:text-white"),E(ge,"type","checkbox"),E(ge,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(fe,"class","text-sm text-gray-700 dark:text-gray-300"),E(me,"class","flex items-center space-x-3"),E(ye,"type","checkbox"),E(ye,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(be,"class","text-sm text-gray-700 dark:text-gray-300"),E($e,"class","flex items-center space-x-3"),E(ke,"type","checkbox"),E(ke,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(Ce,"class","text-sm text-gray-700 dark:text-gray-300"),E(ve,"class","flex items-center space-x-3"),E(ze,"type","checkbox"),E(ze,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(je,"class","text-sm text-gray-700 dark:text-gray-300"),E(Me,"class","flex items-center space-x-3"),E(ue,"class","space-y-3"),E(Ue,"for","sensitivity"),E(Ue,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(Pe,"id","sensitivity"),E(Pe,"type","range"),E(Pe,"min","0.1"),E(Pe,"max","1.0"),E(Pe,"step","0.1"),E(Pe,"class","w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer"),E(Ae,"class","flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1"),E(ce,"class","space-y-4"),E(f,"class","p-6 space-y-6"),E(Be,"class","px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),E(Fe,"class","px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),E(Ve,"class","flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700"),E(r,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-full overflow-y-auto"),E(t,"class","fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4")},m(c,d){$(c,t,d),y(t,r),y(r,n),y(n,a),C(s,a,null),y(a,o),y(a,l),y(n,i),y(n,m),C(g,m,null),y(r,p),y(r,f),y(f,x),y(x,h),y(x,b),y(x,w),V(w,e[0].name),y(x,v),Qe&&Qe.m(x,null),y(f,_),y(f,H),y(H,R),y(H,D),y(H,P),V(P,e[0].rtsp_url),y(H,W),Xe&&Xe.m(H,null),y(f,A),y(f,I),y(I,J),y(J,F),y(J,G),y(J,q),V(q,e[0].username),y(I,K),y(I,Z),y(Z,Q),y(Z,X),y(Z,Y),V(Y,e[0].password),y(f,ee),y(f,te),y(te,re),et[ne].m(re,null),y(te,oe),rt&&rt.m(te,null),y(f,le),y(f,ce),y(ce,ie),y(ce,de),y(ce,ue),y(ue,me),y(me,ge),ge.checked=e[0].motion_detection,y(me,pe),y(me,fe),y(ue,xe),y(ue,$e),y($e,ye),ye.checked=e[0].ai_detection,y($e,he),y($e,be),y(ue,we),y(ue,ve),y(ve,ke),ke.checked=e[0].record_motion,y(ve,_e),y(ve,Ce),y(ue,Ne),y(ue,Me),y(Me,ze),ze.checked=e[0].send_telegram,y(Me,Le),y(Me,je),y(ce,Te),y(ce,Oe),y(Oe,Ue),y(Ue,Ee),y(Ue,He),y(Ue,Re),y(Oe,De),y(Oe,Pe),V(Pe,e[0].sensitivity),y(Oe,We),y(Oe,Ae),y(r,Ie),y(r,Ve),y(Ve,Be),y(Ve,Je),y(Ve,Fe),Ge=!0,qe||(Ke=[S(window,"keydown",e[7]),S(m,"click",e[4]),S(w,"input",e[8]),S(P,"input",e[9]),S(q,"input",e[10]),S(Y,"input",e[11]),S(re,"click",e[5]),S(ge,"change",e[12]),S(ye,"change",e[13]),S(ke,"change",e[14]),S(ze,"change",e[15]),S(Pe,"change",e[16]),S(Pe,"input",e[16]),S(Be,"click",e[4]),S(Fe,"click",e[6])],qe=!0)},p(e,[t]){1&t&&w.value!==e[0].name&&V(w,e[0].name),(!Ge||8&t)&&B(w,"border-red-500",e[3].name),e[3].name?Qe?Qe.p(e,t):(Qe=bn(e),Qe.c(),Qe.m(x,null)):Qe&&(Qe.d(1),Qe=null),1&t&&P.value!==e[0].rtsp_url&&V(P,e[0].rtsp_url),(!Ge||8&t)&&B(P,"border-red-500",e[3].rtsp_url),e[3].rtsp_url?Xe?Xe.p(e,t):(Xe=wn(e),Xe.c(),Xe.m(H,null)):Xe&&(Xe.d(1),Xe=null),1&t&&q.value!==e[0].username&&V(q,e[0].username),1&t&&Y.value!==e[0].password&&V(Y,e[0].password);let r=ne;ne=tt(e),ne!==r&&(L(),d(et[r],1,1,()=>{et[r]=null}),j(),ae=et[ne],ae||(ae=et[ne]=Ye[ne](e),ae.c()),u(ae,1),ae.m(re,null)),(!Ge||3&t&&se!==(se=e[1]||!e[0].rtsp_url.trim()))&&(re.disabled=se),e[2]?rt?rt.p(e,t):(rt=_n(e),rt.c(),rt.m(te,null)):rt&&(rt.d(1),rt=null),1&t&&(ge.checked=e[0].motion_detection),1&t&&(ye.checked=e[0].ai_detection),1&t&&(ke.checked=e[0].record_motion),1&t&&(ze.checked=e[0].send_telegram),(!Ge||1&t)&&Ze!==(Ze=Math.round(100*e[0].sensitivity)+"")&&z(He,Ze),1&t&&V(Pe,e[0].sensitivity)},i(e){Ge||(u(s.$$.fragment,e),u(g.$$.fragment,e),u(ae),Ge=!0)},o(e){d(s.$$.fragment,e),d(g.$$.fragment,e),d(ae),Ge=!1},d(e){e&&c(t),k(s),k(g),Qe&&Qe.d(),Xe&&Xe.d(),et[ne].d(),rt&&rt.d(),qe=!1,M(Ke)}}}function Nn(e,t,r){const n=R();let a={name:"",rtsp_url:"",username:"",password:"",motion_detection:!0,ai_detection:!0,sensitivity:.7,record_motion:!0,send_telegram:!0},s=!1,o=null,l={};function c(){n("close")}function i(){return r(3,l={}),a.name.trim()||r(3,l.name="Название обязательно",l),a.rtsp_url.trim()?function(e){try{return"rtsp:"===new URL(e).protocol}catch{return!1}}(a.rtsp_url)||r(3,l.rtsp_url="Некорректный RTSP URL",l):r(3,l.rtsp_url="RTSP URL обязателен",l),0===Object.keys(l).length}return[a,s,o,l,c,async function(){if(a.rtsp_url.trim()){r(1,s=!0),r(2,o=null);try{const e=await fetch("/api/cameras/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rtsp_url:a.rtsp_url,username:a.username,password:a.password})}),t=await e.json();r(2,o=t)}catch(e){r(2,o={success:!1,message:"Ошибка соединения с сервером"})}finally{r(1,s=!1)}}else r(2,o={success:!1,message:"Введите RTSP URL"})},async function(){i()&&n("save",a)},function(e){"Escape"===e.key&&c()},function(){a.name=this.value,r(0,a)},function(){a.rtsp_url=this.value,r(0,a)},function(){a.username=this.value,r(0,a)},function(){a.password=this.value,r(0,a)},function(){a.motion_detection=this.checked,r(0,a)},function(){a.ai_detection=this.checked,r(0,a)},function(){a.record_motion=this.checked,r(0,a)},function(){a.send_telegram=this.checked,r(0,a)},function(){a.sensitivity=J(this.value),r(0,a)}]}class Mn extends n{constructor(e){super(),a(this,e,Nn,Cn,r,{})}}function zn(e,t,r){const n=e.slice();return n[12]=t[r],n}function Ln(e){let r,n,a,s,o,l,i,m,g,p,f,x,h,b,w;return a=new wt({props:{size:24,class:"text-white"}}),f=new wt({props:{size:16,class:"mr-2"}}),{c(){r=T("div"),n=T("div"),N(a.$$.fragment),s=O(),o=T("h3"),o.textContent="Нет камер",l=O(),i=T("p"),i.textContent="Добавьте первую камеру для начала мониторинга",m=O(),g=T("div"),p=T("button"),N(f.$$.fragment),x=U("\n          Добавить камеру"),E(n,"class","mx-auto h-12 w-12 bg-gray-400 rounded-lg flex items-center justify-center"),E(o,"class","mt-2 text-sm font-medium text-gray-900 dark:text-white"),E(i,"class","mt-1 text-sm text-gray-500 dark:text-gray-400"),E(p,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),E(g,"class","mt-6"),E(r,"class","text-center py-12")},m(t,c){$(t,r,c),y(r,n),C(a,n,null),y(r,s),y(r,o),y(r,l),y(r,i),y(r,m),y(r,g),y(g,p),C(f,p,null),y(p,x),h=!0,b||(w=S(p,"click",e[5]),b=!0)},p:t,i(e){h||(u(a.$$.fragment,e),u(f.$$.fragment,e),h=!0)},o(e){d(a.$$.fragment,e),d(f.$$.fragment,e),h=!1},d(e){e&&c(r),k(a),k(f),b=!1,w()}}}function jn(e){let r,n,a,s,o,l,i,m,g,p,f,x;return n=new Lt({props:{class:"mx-auto h-12 w-12 text-gray-400"}}),{c(){r=T("div"),N(n.$$.fragment),a=O(),s=T("h3"),s.textContent="Камеры не найдены",o=O(),l=T("p"),l.textContent="Попробуйте изменить параметры поиска",i=O(),m=T("div"),g=T("button"),g.textContent="Сбросить фильтры",E(s,"class","mt-2 text-sm font-medium text-gray-900 dark:text-white"),E(l,"class","mt-1 text-sm text-gray-500 dark:text-gray-400"),E(g,"class","inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),E(m,"class","mt-6"),E(r,"class","text-center py-12")},m(t,c){$(t,r,c),C(n,r,null),y(r,a),y(r,s),y(r,o),y(r,l),y(r,i),y(r,m),y(m,g),p=!0,f||(x=S(g,"click",e[10]),f=!0)},p:t,i(e){p||(u(n.$$.fragment,e),p=!0)},o(e){d(n.$$.fragment,e),p=!1},d(e){e&&c(r),k(n),f=!1,x()}}}function Sn(e){let t,r,n=[],a=new Map,o=s(e[4]);const l=e=>e[12].id;for(let s=0;s<o.length;s+=1){let t=zn(e,o,s),r=l(t);a.set(r,n[s]=Tn(r,t))}return{c(){t=T("div");for(let e=0;e<n.length;e+=1)n[e].c();E(t,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6")},m(e,a){$(e,t,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(t,null);r=!0},p(e,r){16&r&&(o=s(e[4]),L(),n=D(n,r,l,1,e,o,a,t,A,Tn,null,zn),j())},i(e){if(!r){for(let e=0;e<o.length;e+=1)u(n[e]);r=!0}},o(e){for(let t=0;t<n.length;t+=1)d(n[t]);r=!1},d(e){e&&c(t);for(let t=0;t<n.length;t+=1)n[t].d()}}}function Tn(e,t){let r,n,a;return n=new Jr({props:{camera:t[12],showControls:!0}}),{key:e,first:null,c(){r=b(),N(n.$$.fragment),this.first=r},m(e,t){$(e,r,t),C(n,e,t),a=!0},p(e,r){t=e;const a={};16&r&&(a.camera=t[12]),n.$set(a)},i(e){a||(u(n.$$.fragment,e),a=!0)},o(e){d(n.$$.fragment,e),a=!1},d(e){e&&c(r),k(n,e)}}}function On(e){let r,n;return r=new Mn({}),r.$on("close",e[6]),r.$on("save",e[11]),{c(){N(r.$$.fragment)},m(e,t){C(r,e,t),n=!0},p:t,i(e){n||(u(r.$$.fragment,e),n=!0)},o(e){d(r.$$.fragment,e),n=!1},d(e){k(r,e)}}}function Un(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,w,v,_,H,R,D,P,W,A,I,B,J,q,K,Z,Q,X,Y,ee,te,re,ne,ae,se,oe,le=e[4].length+"",ce=e[2].length+"";l=new wt({props:{size:16,class:"mr-2"}}),h=new Lt({props:{size:16,class:"text-gray-400"}}),R=new Qe({props:{size:16,class:"text-gray-400"}});const ie=[Sn,jn,Ln],de=[];function ue(e,t){return e[4].length>0?0:e[2].length>0?1:2}ee=ue(e),te=de[ee]=ie[ee](e);let me=e[3]&&On(e);return{c(){t=T("div"),r=T("div"),n=T("div"),n.innerHTML='<h2 class="text-2xl font-bold text-gray-900 dark:text-white">Камеры</h2> <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">Управление камерами видеонаблюдения</p>',a=O(),s=T("div"),o=T("button"),N(l.$$.fragment),i=U("\n        Добавить камеру"),m=O(),g=T("div"),p=T("div"),f=T("div"),x=T("div"),N(h.$$.fragment),w=O(),v=T("input"),_=O(),H=T("div"),N(R.$$.fragment),D=O(),P=T("select"),W=T("option"),W.textContent="Все статусы",A=T("option"),A.textContent="Онлайн",I=T("option"),I.textContent="Офлайн",B=T("option"),B.textContent="Ошибка",J=O(),q=T("div"),K=U("Показано: "),Z=U(le),Q=U(" из "),X=U(ce),Y=O(),te.c(),re=O(),me&&me.c(),ne=b(),E(o,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"),E(s,"class","mt-4 sm:mt-0"),E(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between"),E(x,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),E(v,"type","text"),E(v,"placeholder","Поиск камер..."),E(v,"class","block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"),E(f,"class","relative flex-1 max-w-md"),W.__value="all",V(W,W.__value),A.__value="online",V(A,A.__value),I.__value="offline",V(I,I.__value),B.__value="error",V(B,B.__value),E(P,"class","block px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"),void 0===e[1]&&G(()=>e[9].call(P)),E(H,"class","flex items-center space-x-2"),E(q,"class","text-sm text-gray-600 dark:text-gray-400"),E(p,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0 sm:space-x-4"),E(g,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"),E(t,"class","space-y-6")},m(c,d){$(c,t,d),y(t,r),y(r,n),y(r,a),y(r,s),y(s,o),C(l,o,null),y(o,i),y(t,m),y(t,g),y(g,p),y(p,f),y(f,x),C(h,x,null),y(f,w),y(f,v),V(v,e[0]),y(p,_),y(p,H),C(R,H,null),y(H,D),y(H,P),y(P,W),y(P,A),y(P,I),y(P,B),F(P,e[1],!0),y(p,J),y(p,q),y(q,K),y(q,Z),y(q,Q),y(q,X),y(t,Y),de[ee].m(t,null),$(c,re,d),me&&me.m(c,d),$(c,ne,d),ae=!0,se||(oe=[S(o,"click",e[5]),S(v,"input",e[8]),S(P,"change",e[9])],se=!0)},p(e,[r]){1&r&&v.value!==e[0]&&V(v,e[0]),2&r&&F(P,e[1]),(!ae||16&r)&&le!==(le=e[4].length+"")&&z(Z,le),(!ae||4&r)&&ce!==(ce=e[2].length+"")&&z(X,ce);let n=ee;ee=ue(e),ee===n?de[ee].p(e,r):(L(),d(de[n],1,1,()=>{de[n]=null}),j(),te=de[ee],te?te.p(e,r):(te=de[ee]=ie[ee](e),te.c()),u(te,1),te.m(t,null)),e[3]?me?(me.p(e,r),8&r&&u(me,1)):(me=On(e),me.c(),u(me,1),me.m(ne.parentNode,ne)):me&&(L(),d(me,1,1,()=>{me=null}),j())},i(e){ae||(u(l.$$.fragment,e),u(h.$$.fragment,e),u(R.$$.fragment,e),u(te),u(me),ae=!0)},o(e){d(l.$$.fragment,e),d(h.$$.fragment,e),d(R.$$.fragment,e),d(te),d(me),ae=!1},d(e){e&&(c(t),c(re),c(ne)),k(l),k(h),k(R),de[ee].d(),me&&me.d(e),se=!1,M(oe)}}}function En(e,t,r){let n;H(e,Y,e=>r(2,n=e));let a="",s="all",o=!1,l=[];function c(){r(3,o=!1)}async function i(e){try{const t=await fetch("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const r=await t.json();Y.update(e=>[...e,r.data]),ae(`Камера "${e.name}" добавлена`,"success"),c()}else{ae(`Ошибка: ${(await t.json()).error||"Не удалось добавить камеру"}`,"error")}}catch(t){console.error("Add camera error:",t),ae("Ошибка при добавлении камеры","error")}}return e.$$.update=()=>{7&e.$$.dirty&&r(4,l=n.filter(e=>{const t=e.name.toLowerCase().includes(a.toLowerCase())||e.id.toLowerCase().includes(a.toLowerCase()),r="all"===s||e.status===s;return t&&r}))},[a,s,n,o,l,function(){r(3,o=!0)},c,i,function(){a=this.value,r(0,a)},function(){s=q(this),r(1,s)},()=>{r(0,a=""),r(1,s="all")},e=>i(e.detail)]}class Hn extends n{constructor(e){super(),a(this,e,En,Un,r,{})}}function Rn(e,t,r){const n=e.slice();return n[17]=t[r],n}function Dn(e,t,r){const n=e.slice();return n[20]=t[r],n}function Pn(e,t){let r,n,a,s=t[20].name+"";return{key:e,first:null,c(){r=T("option"),n=U(s),r.__value=a=t[20].id,V(r,r.__value),this.first=r},m(e,t){$(e,r,t),y(r,n)},p(e,o){t=e,256&o&&s!==(s=t[20].name+"")&&z(n,s),256&o&&a!==(a=t[20].id)&&(r.__value=a,V(r,r.__value))},d(e){e&&c(r)}}}function Wn(e){let r,n,a;return{c(){r=T("button"),r.textContent="Сбросить фильтры",E(r,"class","text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium")},m(t,s){$(t,r,s),n||(a=S(r,"click",e[11]),n=!0)},p:t,d(e){e&&c(r),n=!1,a()}}}function An(e){let r,n,a,s,o,l,i;return n=new Me({props:{class:"mx-auto h-12 w-12 text-gray-400"}}),{c(){r=T("div"),N(n.$$.fragment),a=O(),s=T("h3"),s.textContent="Нет событий",o=O(),l=T("p"),l.textContent="События будут отображаться здесь после их обнаружения",E(s,"class","mt-2 text-sm font-medium text-gray-900 dark:text-white"),E(l,"class","mt-1 text-sm text-gray-500 dark:text-gray-400"),E(r,"class","text-center py-12")},m(e,t){$(e,r,t),C(n,r,null),y(r,a),y(r,s),y(r,o),y(r,l),i=!0},p:t,i(e){i||(u(n.$$.fragment,e),i=!0)},o(e){d(n.$$.fragment,e),i=!1},d(e){e&&c(r),k(n)}}}function In(e){let r,n,a,s,o,l,i,m,g,p,f,x;return n=new Qe({props:{class:"mx-auto h-12 w-12 text-gray-400"}}),{c(){r=T("div"),N(n.$$.fragment),a=O(),s=T("h3"),s.textContent="События не найдены",o=O(),l=T("p"),l.textContent="Попробуйте изменить параметры фильтрации",i=O(),m=T("div"),g=T("button"),g.textContent="Сбросить фильтры",E(s,"class","mt-2 text-sm font-medium text-gray-900 dark:text-white"),E(l,"class","mt-1 text-sm text-gray-500 dark:text-gray-400"),E(g,"class","inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),E(m,"class","mt-6"),E(r,"class","text-center py-12")},m(t,c){$(t,r,c),C(n,r,null),y(r,a),y(r,s),y(r,o),y(r,l),y(r,i),y(r,m),y(m,g),p=!0,f||(x=S(g,"click",e[11]),f=!0)},p:t,i(e){p||(u(n.$$.fragment,e),p=!0)},o(e){d(n.$$.fragment,e),p=!1},d(e){e&&c(r),k(n),f=!1,x()}}}function Vn(e){let t,r,n,a,o=[],l=new Map,i=s(e[5]);const m=e=>e[17].id;for(let s=0;s<i.length;s+=1){let t=Rn(e,i,s),r=m(t);l.set(r,o[s]=Bn(r,t))}function g(e,t){return e[7]&&!e[6]?Fn:e[6]?Jn:void 0}let p=g(e),f=p&&p(e);return{c(){t=T("div");for(let e=0;e<o.length;e+=1)o[e].c();r=O(),f&&f.c(),n=b(),E(t,"class","space-y-4")},m(e,s){$(e,t,s);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(t,null);$(e,r,s),f&&f.m(e,s),$(e,n,s),a=!0},p(e,r){32&r&&(i=s(e[5]),L(),o=D(o,r,m,1,e,i,l,t,A,Bn,null,Rn),j()),p===(p=g(e))&&f?f.p(e,r):(f&&f.d(1),f=p&&p(e),f&&(f.c(),f.m(n.parentNode,n)))},i(e){if(!a){for(let e=0;e<i.length;e+=1)u(o[e]);a=!0}},o(e){for(let t=0;t<o.length;t+=1)d(o[t]);a=!1},d(e){e&&(c(t),c(r),c(n));for(let t=0;t<o.length;t+=1)o[t].d();f&&f.d(e)}}}function Bn(e,t){let r,n,a;return n=new sn({props:{event:t[17],compact:!1}}),{key:e,first:null,c(){r=b(),N(n.$$.fragment),this.first=r},m(e,t){$(e,r,t),C(n,e,t),a=!0},p(e,r){t=e;const a={};32&r&&(a.event=t[17]),n.$set(a)},i(e){a||(u(n.$$.fragment,e),a=!0)},o(e){d(n.$$.fragment,e),a=!1},d(e){e&&c(r),k(n,e)}}}function Jn(e){let r;return{c(){r=T("div"),r.innerHTML='<div class="inline-flex items-center text-sm text-gray-600 dark:text-gray-400"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-primary-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n          Загрузка...</div>',E(r,"class","text-center py-4")},m(e,t){$(e,r,t)},p:t,d(e){e&&c(r)}}}function Fn(e){let r,n,a,s;return{c(){r=T("div"),n=T("button"),n.textContent="Загрузить еще",E(n,"class","inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),E(r,"class","text-center")},m(t,o){$(t,r,o),y(r,n),a||(s=S(n,"click",e[9]),a=!0)},p:t,d(e){e&&c(r),a=!1,s()}}}function Gn(e){let t,r,n,a,o,l,i,m,g,p,f,x,h,b,w,v,_,H,R,W,A,I,B,J,q,K,Z,Q,X,Y,ee,te,re,ne,ae,se,oe,le,ce,ie,de,ue,me,ge,pe,fe,xe,$e,ye=[],he=new Map,be=e[5].length+"",we=e[4].length+"";i=new Pe({props:{size:16,class:"mr-2"}}),b=new Lt({props:{size:16,class:"text-gray-400"}});let ve=s(e[8]);const ke=e=>e[20].id;for(let s=0;s<ve.length;s+=1){let t=Dn(e,ve,s),r=ke(t);he.set(r,ye[s]=Pn(r,t))}let _e=(e[0]||"all"!==e[1]||"all"!==e[2]||"all"!==e[3])&&Wn(e);const Ce=[Vn,In,An],Ne=[];function Me(e,t){return e[5].length>0?0:e[4].length>0?1:2}return ge=Me(e),pe=Ne[ge]=Ce[ge](e),{c(){t=T("div"),r=T("div"),n=T("div"),n.innerHTML='<h2 class="text-2xl font-bold text-gray-900 dark:text-white">События</h2> <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">История событий системы безопасности</p>',a=O(),o=T("div"),l=T("button"),N(i.$$.fragment),m=U("\n        Экспорт"),g=O(),p=T("div"),f=T("div"),x=T("div"),h=T("div"),N(b.$$.fragment),w=O(),v=T("input"),_=O(),H=T("div"),R=T("select"),W=T("option"),W.textContent="Все камеры";for(let e=0;e<ye.length;e+=1)ye[e].c();A=O(),I=T("div"),B=T("select"),J=T("option"),J.textContent="Все типы",q=T("option"),q.textContent="Движение",K=T("option"),K.textContent="ИИ детекция",Z=O(),Q=T("div"),X=T("select"),Y=T("option"),Y.textContent="Все время",ee=T("option"),ee.textContent="Сегодня",te=T("option"),te.textContent="Неделя",re=T("option"),re.textContent="Месяц",ne=O(),ae=T("div"),se=T("div"),oe=U("Показано: "),le=U(be),ce=U(" из "),ie=U(we),de=U(" событий"),ue=O(),_e&&_e.c(),me=O(),pe.c(),E(l,"class","inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),E(o,"class","mt-4 sm:mt-0 flex space-x-3"),E(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between"),E(h,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),E(v,"type","text"),E(v,"placeholder","Поиск событий..."),E(v,"class","block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"),E(x,"class","relative"),W.__value="all",V(W,W.__value),E(R,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"),void 0===e[1]&&G(()=>e[13].call(R)),J.__value="all",V(J,J.__value),q.__value="motion",V(q,q.__value),K.__value="ai_detection",V(K,K.__value),E(B,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"),void 0===e[2]&&G(()=>e[14].call(B)),Y.__value="all",V(Y,Y.__value),ee.__value="today",V(ee,ee.__value),te.__value="week",V(te,te.__value),re.__value="month",V(re,re.__value),E(X,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"),void 0===e[3]&&G(()=>e[15].call(X)),E(f,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"),E(se,"class","text-sm text-gray-600 dark:text-gray-400"),E(ae,"class","mt-4 flex items-center justify-between"),E(p,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"),E(t,"class","space-y-6")},m(s,c){$(s,t,c),y(t,r),y(r,n),y(r,a),y(r,o),y(o,l),C(i,l,null),y(l,m),y(t,g),y(t,p),y(p,f),y(f,x),y(x,h),C(b,h,null),y(x,w),y(x,v),V(v,e[0]),y(f,_),y(f,H),y(H,R),y(R,W);for(let e=0;e<ye.length;e+=1)ye[e]&&ye[e].m(R,null);F(R,e[1],!0),y(f,A),y(f,I),y(I,B),y(B,J),y(B,q),y(B,K),F(B,e[2],!0),y(f,Z),y(f,Q),y(Q,X),y(X,Y),y(X,ee),y(X,te),y(X,re),F(X,e[3],!0),y(p,ne),y(p,ae),y(ae,se),y(se,oe),y(se,le),y(se,ce),y(se,ie),y(se,de),y(ae,ue),_e&&_e.m(ae,null),y(t,me),Ne[ge].m(t,null),fe=!0,xe||($e=[S(l,"click",e[10]),S(v,"input",e[12]),S(R,"change",e[13]),S(B,"change",e[14]),S(X,"change",e[15])],xe=!0)},p(e,[r]){1&r&&v.value!==e[0]&&V(v,e[0]),256&r&&(ve=s(e[8]),ye=D(ye,r,ke,1,e,ve,he,R,P,Pn,null,Dn)),258&r&&F(R,e[1]),4&r&&F(B,e[2]),8&r&&F(X,e[3]),(!fe||32&r)&&be!==(be=e[5].length+"")&&z(le,be),(!fe||16&r)&&we!==(we=e[4].length+"")&&z(ie,we),e[0]||"all"!==e[1]||"all"!==e[2]||"all"!==e[3]?_e?_e.p(e,r):(_e=Wn(e),_e.c(),_e.m(ae,null)):_e&&(_e.d(1),_e=null);let n=ge;ge=Me(e),ge===n?Ne[ge].p(e,r):(L(),d(Ne[n],1,1,()=>{Ne[n]=null}),j(),pe=Ne[ge],pe?pe.p(e,r):(pe=Ne[ge]=Ce[ge](e),pe.c()),u(pe,1),pe.m(t,null))},i(e){fe||(u(i.$$.fragment,e),u(b.$$.fragment,e),u(pe),fe=!0)},o(e){d(i.$$.fragment,e),d(b.$$.fragment,e),d(pe),fe=!1},d(e){e&&c(t),k(i),k(b);for(let t=0;t<ye.length;t+=1)ye[t].d();_e&&_e.d(),Ne[ge].d(),xe=!1,M($e)}}}function qn(e,t,r){let n,a;H(e,ee,e=>r(4,n=e)),H(e,Y,e=>r(8,a=e));let s="",o="all",l="all",c="all",i=[],d=!1,u=1,m=!0;return e.$$.update=()=>{31&e.$$.dirty&&r(5,i=n.filter(e=>{var t;const r=(null==(t=e.description)?void 0:t.toLowerCase().includes(s.toLowerCase()))||e.camera_name.toLowerCase().includes(s.toLowerCase()),n="all"===o||e.camera_id===o,a="all"===l||e.type===l;let i=!0;if("all"!==c){const t=new Date(e.created_at),r=new Date;switch(c){case"today":i=t.toDateString()===r.toDateString();break;case"week":i=t>=new Date(r.getTime()-6048e5);break;case"month":i=t>=new Date(r.getTime()-2592e6)}}return r&&n&&a&&i}))},[s,o,l,c,n,i,d,m,a,async function(){if(!d&&m){r(6,d=!0);try{const e=await fetch("/api/events?limit=20&offset="+20*u);if(e.ok){const t=(await e.json()).data||[];0===t.length?r(7,m=!1):(ee.update(e=>[...e,...t]),u++)}}catch(e){console.error("Load events error:",e)}finally{r(6,d=!1)}}},async function(){try{const e=new URLSearchParams;"all"!==o&&e.append("camera_id",o),"all"!==l&&e.append("type",l);const t=await fetch(`/api/events/export?${e}`);if(t.ok){const e=await t.blob(),r=window.URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`events-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}}catch(e){console.error("Export events error:",e)}},function(){r(0,s=""),r(1,o="all"),r(2,l="all"),r(3,c="all")},function(){s=this.value,r(0,s)},function(){o=q(this),r(1,o)},function(){l=q(this),r(2,l)},function(){c=q(this),r(3,c)}]}class Kn extends n{constructor(e){super(),a(this,e,qn,Gn,r,{})}}function Zn(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,b,w,v,_,L,j,H,R,D,P,W,A,I,B,q,K,Z,Q,X,Y,ee,te,re,ne,ae,se,oe,le,ce,ie,de,ue,me,ge,pe,fe,xe,$e,ye,he,be,we,ve,ke,_e,Ce,Ne,Me,ze,Le,je,Se,Te,Oe,Ue,Ee,He,Re,De,Pe,We,Ae,Ie,Ve,Be,Je,Fe,Ge,qe,Ke=Math.round(100*e[0].ai.threshold)+"";return Be=new Rt({props:{size:16,class:"mr-2"}}),{c(){t=T("div"),r=T("div"),n=T("h3"),n.textContent="Telegram Bot",a=O(),s=T("div"),o=T("div"),l=T("label"),l.textContent="Bot Token",i=O(),m=T("input"),g=O(),p=T("div"),f=T("label"),f.textContent="Разрешенные пользователи (ID через запятую)",x=O(),h=T("input"),b=O(),w=T("div"),v=T("label"),v.textContent="Часы уведомлений",_=O(),L=T("input"),j=O(),H=T("div"),R=T("h3"),R.textContent="Искусственный интеллект",D=O(),P=T("div"),W=T("label"),A=T("input"),I=O(),B=T("span"),B.textContent="Включить ИИ детекцию",q=O(),K=T("div"),Z=T("label"),Q=U("Порог уверенности: "),X=U(Ke),Y=U("%"),ee=O(),te=T("input"),re=O(),ne=T("div"),ae=T("label"),ae.textContent="Устройство вычислений",se=O(),oe=T("select"),le=T("option"),le.textContent="CPU",ce=T("option"),ce.textContent="GPU (CUDA)",ie=O(),de=T("div"),ue=T("h3"),ue.textContent="Хранилище",me=O(),ge=T("div"),pe=T("div"),fe=T("label"),fe.textContent="Хранить записи (дней)",xe=O(),$e=T("input"),ye=O(),he=T("div"),be=T("label"),be.textContent="Максимальный размер видео (МБ)",we=O(),ve=T("input"),ke=O(),_e=T("div"),Ce=T("h3"),Ce.textContent="Система",Ne=O(),Me=T("div"),ze=T("label"),Le=T("input"),je=O(),Se=T("span"),Se.textContent="Автоматическая очистка старых файлов",Te=O(),Oe=T("label"),Ue=T("input"),Ee=O(),He=T("span"),He.textContent="Включить отладочные логи",Re=O(),De=T("div"),Pe=T("h3"),Pe.textContent="Опасная зона",We=O(),Ae=T("p"),Ae.textContent="Эти действия необратимы. Будьте осторожны!",Ie=O(),Ve=T("button"),N(Be.$$.fragment),Je=U("\n        Очистить все данные"),E(n,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),E(l,"for","telegram-token"),E(l,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(m,"id","telegram-token"),E(m,"type","password"),E(m,"placeholder","1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"),E(m,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(f,"for","telegram-users"),E(f,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(h,"id","telegram-users"),E(h,"type","text"),E(h,"placeholder","123456789,987654321"),E(h,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(v,"for","notification-hours"),E(v,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(L,"id","notification-hours"),E(L,"type","text"),E(L,"placeholder","08:00-22:00"),E(L,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(s,"class","space-y-4"),E(r,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(R,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),E(A,"type","checkbox"),E(A,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(B,"class","text-sm text-gray-700 dark:text-gray-300"),E(W,"class","flex items-center space-x-3"),E(Z,"for","ai-threshold"),E(Z,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"),E(te,"id","ai-threshold"),E(te,"type","range"),E(te,"min","0.1"),E(te,"max","1.0"),E(te,"step","0.1"),E(te,"class","w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer"),E(ae,"for","ai-device"),E(ae,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),le.__value="cpu",V(le,le.__value),ce.__value="gpu",V(ce,ce.__value),E(oe,"id","ai-device"),E(oe,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),void 0===e[0].ai.device_type&&G(()=>e[12].call(oe)),E(P,"class","space-y-4"),E(H,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(ue,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),E(fe,"for","retention-days"),E(fe,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E($e,"id","retention-days"),E($e,"type","number"),E($e,"min","1"),E($e,"max","365"),E($e,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(be,"for","video-size"),E(be,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),E(ve,"id","video-size"),E(ve,"type","number"),E(ve,"min","10"),E(ve,"max","1000"),E(ve,"class","block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"),E(ge,"class","space-y-4"),E(de,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(Ce,"class","text-lg font-medium text-gray-900 dark:text-white mb-4"),E(Le,"type","checkbox"),E(Le,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(Se,"class","text-sm text-gray-700 dark:text-gray-300"),E(ze,"class","flex items-center space-x-3"),E(Ue,"type","checkbox"),E(Ue,"class","h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-gray-600 rounded"),E(He,"class","text-sm text-gray-700 dark:text-gray-300"),E(Oe,"class","flex items-center space-x-3"),E(Me,"class","space-y-4"),E(_e,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"),E(t,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),E(Pe,"class","text-lg font-medium text-red-900 dark:text-red-300 mb-4"),E(Ae,"class","text-sm text-red-700 dark:text-red-400 mb-4"),E(Ve,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"),E(De,"class","bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 p-6")},m(c,d){$(c,t,d),y(t,r),y(r,n),y(r,a),y(r,s),y(s,o),y(o,l),y(o,i),y(o,m),V(m,e[0].telegram.token),y(s,g),y(s,p),y(p,f),y(p,x),y(p,h),V(h,e[0].telegram.allowed_users),y(s,b),y(s,w),y(w,v),y(w,_),y(w,L),V(L,e[0].telegram.notification_hours),y(t,j),y(t,H),y(H,R),y(H,D),y(H,P),y(P,W),y(W,A),A.checked=e[0].ai.enabled,y(W,I),y(W,B),y(P,q),y(P,K),y(K,Z),y(Z,Q),y(Z,X),y(Z,Y),y(K,ee),y(K,te),V(te,e[0].ai.threshold),y(P,re),y(P,ne),y(ne,ae),y(ne,se),y(ne,oe),y(oe,le),y(oe,ce),F(oe,e[0].ai.device_type,!0),y(t,ie),y(t,de),y(de,ue),y(de,me),y(de,ge),y(ge,pe),y(pe,fe),y(pe,xe),y(pe,$e),V($e,e[0].storage.retention_days),y(ge,ye),y(ge,he),y(he,be),y(he,we),y(he,ve),V(ve,e[0].storage.max_video_size_mb),y(t,ke),y(t,_e),y(_e,Ce),y(_e,Ne),y(_e,Me),y(Me,ze),y(ze,Le),Le.checked=e[0].system.auto_cleanup,y(ze,je),y(ze,Se),y(Me,Te),y(Me,Oe),y(Oe,Ue),Ue.checked=e[0].system.debug_logging,y(Oe,Ee),y(Oe,He),$(c,Re,d),$(c,De,d),y(De,Pe),y(De,We),y(De,Ae),y(De,Ie),y(De,Ve),C(Be,Ve,null),y(Ve,Je),Fe=!0,Ge||(qe=[S(m,"input",e[7]),S(h,"input",e[8]),S(L,"input",e[9]),S(A,"change",e[10]),S(te,"change",e[11]),S(te,"input",e[11]),S(oe,"change",e[12]),S($e,"input",e[13]),S(ve,"input",e[14]),S(Le,"change",e[15]),S(Ue,"change",e[16]),S(Ve,"click",e[4])],Ge=!0)},p(e,t){1&t&&m.value!==e[0].telegram.token&&V(m,e[0].telegram.token),1&t&&h.value!==e[0].telegram.allowed_users&&V(h,e[0].telegram.allowed_users),1&t&&L.value!==e[0].telegram.notification_hours&&V(L,e[0].telegram.notification_hours),1&t&&(A.checked=e[0].ai.enabled),(!Fe||1&t)&&Ke!==(Ke=Math.round(100*e[0].ai.threshold)+"")&&z(X,Ke),1&t&&V(te,e[0].ai.threshold),1&t&&F(oe,e[0].ai.device_type),1&t&&J($e.value)!==e[0].storage.retention_days&&V($e,e[0].storage.retention_days),1&t&&J(ve.value)!==e[0].storage.max_video_size_mb&&V(ve,e[0].storage.max_video_size_mb),1&t&&(Le.checked=e[0].system.auto_cleanup),1&t&&(Ue.checked=e[0].system.debug_logging)},i(e){Fe||(u(Be.$$.fragment,e),Fe=!0)},o(e){d(Be.$$.fragment,e),Fe=!1},d(e){e&&(c(t),c(Re),c(De)),k(Be),Ge=!1,M(qe)}}}function Qn(e){let r;return{c(){r=T("div"),r.innerHTML='<div class="inline-flex items-center text-sm text-gray-600 dark:text-gray-400"><svg class="animate-spin -ml-1 mr-3 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n        Загрузка настроек...</div>',E(r,"class","text-center py-12")},m(e,t){$(e,r,t)},p:t,i:t,o:t,d(e){e&&c(r)}}}function Xn(e){let t,r,n,a,s,o,l,i,m,g,p,f,x,h,b,w,v,_,H,R,D,P,W,A,I,V=e[2]?"Сохранение...":"Сохранить";m=new At({props:{size:16,class:"mr-2"}}),x=new Pe({props:{size:16,class:"mr-2"}}),v=new Ct({props:{size:16,class:"mr-2"}});const B=[Qn,Zn],J=[];function F(e,t){return e[1]?0:1}return D=F(e),P=J[D]=B[D](e),{c(){t=T("div"),r=T("div"),n=T("div"),n.innerHTML='<h2 class="text-2xl font-bold text-gray-900 dark:text-white">Настройки</h2> <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">Конфигурация системы Ocuai</p>',a=O(),s=T("div"),o=T("input"),l=O(),i=T("label"),N(m.$$.fragment),g=U("\n        Импорт"),p=O(),f=T("button"),N(x.$$.fragment),h=U("\n        Экспорт"),b=O(),w=T("button"),N(v.$$.fragment),_=O(),H=U(V),R=O(),P.c(),E(o,"type","file"),E(o,"accept",".json"),E(o,"class","hidden"),E(o,"id","import-file"),E(i,"for","import-file"),E(i,"class","inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer"),E(f,"class","inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),w.disabled=e[2],E(w,"class","inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"),E(s,"class","flex space-x-3"),E(r,"class","flex items-center justify-between"),E(t,"class","space-y-6")},m(c,d){$(c,t,d),y(t,r),y(r,n),y(r,a),y(r,s),y(s,o),y(s,l),y(s,i),C(m,i,null),y(i,g),y(s,p),y(s,f),C(x,f,null),y(f,h),y(s,b),y(s,w),C(v,w,null),y(w,_),y(w,H),y(t,R),J[D].m(t,null),W=!0,A||(I=[S(o,"change",e[6]),S(f,"click",e[5]),S(w,"click",e[3])],A=!0)},p(e,[r]){(!W||4&r)&&V!==(V=e[2]?"Сохранение...":"Сохранить")&&z(H,V),(!W||4&r)&&(w.disabled=e[2]);let n=D;D=F(e),D===n?J[D].p(e,r):(L(),d(J[n],1,1,()=>{J[n]=null}),j(),P=J[D],P?P.p(e,r):(P=J[D]=B[D](e),P.c()),u(P,1),P.m(t,null))},i(e){W||(u(m.$$.fragment,e),u(x.$$.fragment,e),u(v.$$.fragment,e),u(P),W=!0)},o(e){d(m.$$.fragment,e),d(x.$$.fragment,e),d(v.$$.fragment,e),d(P),W=!1},d(e){e&&c(t),k(m),k(x),k(v),J[D].d(),A=!1,M(I)}}}function Yn(e,t,r){let n={telegram:{token:"",allowed_users:"",notification_hours:"08:00-22:00"},ai:{enabled:!0,threshold:.7,device_type:"cpu"},storage:{retention_days:7,max_video_size_mb:50},system:{auto_cleanup:!0,debug_logging:!1}},a=!1,s=!1;return K(async()=>{await async function(){r(1,a=!0);try{const e=await fetch("/api/settings");if(e.ok){const t=await e.json();t.success&&t.data&&r(0,n={...n,...t.data})}}catch(e){console.error("Load settings error:",e),ae("Ошибка загрузки настроек","error")}finally{r(1,a=!1)}}()}),[n,a,s,async function(){r(2,s=!0);try{const e=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(e.ok)ae("Настройки сохранены","success");else{ae(`Ошибка: ${(await e.json()).error||"Не удалось сохранить настройки"}`,"error")}}catch(e){console.error("Save settings error:",e),ae("Ошибка сохранения настроек","error")}finally{r(2,s=!1)}},async function(){if(confirm("Это действие удалит ВСЕ данные системы (камеры, события, видео). Продолжить?"))try{(await fetch("/api/system/clear",{method:"POST"})).ok?(ae("Данные очищены","success"),setTimeout(()=>window.location.reload(),2e3)):ae("Ошибка очистки данных","error")}catch(e){console.error("Clear data error:",e),ae("Ошибка очистки данных","error")}},async function(){try{const e=await fetch("/api/settings/export");if(e.ok){const t=await e.blob(),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`ocuai-settings-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),ae("Настройки экспортированы","success")}}catch(e){console.error("Export settings error:",e),ae("Ошибка экспорта настроек","error")}},function(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=async e=>{try{const t=JSON.parse(e.target.result);r(0,n={...n,...t}),ae("Настройки импортированы","success")}catch(t){ae("Ошибка импорта настроек","error")}},a.readAsText(t)},function(){n.telegram.token=this.value,r(0,n)},function(){n.telegram.allowed_users=this.value,r(0,n)},function(){n.telegram.notification_hours=this.value,r(0,n)},function(){n.ai.enabled=this.checked,r(0,n)},function(){n.ai.threshold=J(this.value),r(0,n)},function(){n.ai.device_type=q(this),r(0,n)},function(){n.storage.retention_days=J(this.value),r(0,n)},function(){n.storage.max_video_size_mb=J(this.value),r(0,n)},function(){n.system.auto_cleanup=this.checked,r(0,n)},function(){n.system.debug_logging=this.checked,r(0,n)}]}class ea extends n{constructor(e){super(),a(this,e,Yn,Xn,r,{})}}let ta=null,ra=0;function na(){if(ta&&(ta.readyState===WebSocket.CONNECTING||ta.readyState===WebSocket.OPEN))return;const e=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/ws`;try{ta=new WebSocket(e),ta.onopen=function(e){console.log("WebSocket connected"),ra=0,te.set(ta),ae("Соединение с сервером установлено","success",3e3)},ta.onmessage=function(e){try{!function(e){switch(e.type){case"stats_update":X.set(e.data);break;case"camera_status":t=e.camera_id,r=e.status,Y.update(e=>e.map(e=>e.id===t?{...e,status:r,last_seen:(new Date).toISOString()}:e)),"offline"===e.status?ae(`Камера "${e.camera_name}" отключилась`,"warning",8e3):"online"===e.status&&ae(`Камера "${e.camera_name}" подключилась`,"success",5e3);break;case"new_event":ee.update(t=>[e.event,...t].slice(0,100));const n="motion"===e.event.type?"движение":"объект";ae(`${e.event.camera_name}: обнаружено ${n}`,"info",6e3);break;case"motion_detected":ae(`${e.camera_name}: обнаружено движение`,"warning",5e3);break;case"ai_detection":ae(`${e.camera_name}: обнаружен объект "${e.object_class}" (${Math.round(100*e.confidence)}%)`,"info",7e3);break;case"system_alert":ae(e.message,e.level||"warning",1e4);break;case"camera_added":Y.update(t=>[...t,e.camera]),ae(`Добавлена новая камера: ${e.camera.name}`,"success",5e3);break;case"camera_removed":Y.update(t=>t.filter(t=>t.id!==e.camera_id)),ae(`Камера удалена: ${e.camera_name}`,"info",5e3);break;case"camera_updated":Y.update(t=>t.map(t=>t.id===e.camera.id?{...t,...e.camera}:t));break;default:console.log("Unknown WebSocket message type:",e.type)}var t,r}(JSON.parse(e.data))}catch(t){console.error("Failed to parse WebSocket message:",t)}},ta.onclose=function(e){console.log("WebSocket disconnected:",e.code,e.reason),te.set(null),!e.wasClean&&ra<5?setTimeout(()=>{ra++,console.log(`Reconnection attempt ${ra}/5`),na()},1e3*Math.pow(2,ra)):ra>=5&&ae("Не удалось восстановить соединение с сервером","error",1e4)},ta.onerror=function(e){console.error("WebSocket error:",e),ae("Ошибка соединения с сервером","error",5e3)}}catch(t){console.error("Failed to create WebSocket connection:",t),ae("Не удалось подключиться к серверу","error",5e3)}}function aa(e){let r;return{c(){r=T("div"),r.innerHTML='<p class="text-gray-500 dark:text-gray-400">Страница не найдена</p>',E(r,"class","text-center py-12")},m(e,t){$(e,r,t)},p:t,i:t,o:t,d(e){e&&c(r)}}}function sa(e){let t,r,n;var a=e[2][e[0]].component;return a&&(t=W(a,{})),{c(){t&&N(t.$$.fragment),r=b()},m(e,a){t&&C(t,e,a),$(e,r,a),n=!0},p(e,n){if(1&n&&a!==(a=e[2][e[0]].component)){if(t){L();const e=t;d(e.$$.fragment,1,0,()=>{k(e,1)}),j()}a?(t=W(a,{}),N(t.$$.fragment),u(t.$$.fragment,1),C(t,r.parentNode,r)):t=null}},i(e){n||(t&&u(t.$$.fragment,e),n=!0)},o(e){t&&d(t.$$.fragment,e),n=!1},d(e){e&&c(r),t&&k(t,e)}}}function oa(e){var t;let r,n,a,s,o,l,i,m,g,p;n=new vr({props:{currentPage:e[0],sidebarOpen:e[1]}}),n.$on("navigate",e[4]),n.$on("toggle",e[5]),o=new fr({props:{title:(null==(t=e[2][e[0]])?void 0:t.title)||"Ocuai"}}),o.$on("toggleSidebar",e[6]);const f=[sa,aa],x=[];function h(e,t){return e[2][e[0]]?0:1}return m=h(e),g=x[m]=f[m](e),{c(){r=T("div"),N(n.$$.fragment),a=O(),s=T("div"),N(o.$$.fragment),l=O(),i=T("main"),g.c(),E(i,"class","flex-1 overflow-auto p-6"),E(s,"class","flex-1 flex flex-col min-w-0"),E(r,"class","flex h-full bg-gray-50 dark:bg-gray-900")},m(e,t){$(e,r,t),C(n,r,null),y(r,a),y(r,s),C(o,s,null),y(s,l),y(s,i),x[m].m(i,null),p=!0},p(e,[t]){var r;const a={};1&t&&(a.currentPage=e[0]),2&t&&(a.sidebarOpen=e[1]),n.$set(a);const s={};1&t&&(s.title=(null==(r=e[2][e[0]])?void 0:r.title)||"Ocuai"),o.$set(s);let l=m;m=h(e),m===l?x[m].p(e,t):(L(),d(x[l],1,1,()=>{x[l]=null}),j(),g=x[m],g?g.p(e,t):(g=x[m]=f[m](e),g.c()),u(g,1),g.m(i,null))},i(e){p||(u(n.$$.fragment,e),u(o.$$.fragment,e),u(g),p=!0)},o(e){d(n.$$.fragment,e),d(o.$$.fragment,e),d(g),p=!1},d(e){e&&c(r),k(n),k(o),x[m].d()}}}function la(e,t,r){let n="dashboard",a=!1;const s={dashboard:{component:hn,title:"Панель управления"},cameras:{component:Hn,title:"Камеры"},events:{component:Kn,title:"События"},settings:{component:ea,title:"Настройки"}};function o(e){r(0,n=e),r(1,a=!1)}K(()=>{!async function(){try{const e=await fetch("/api/cameras");if(e.ok){const t=await e.json();Y.set(t.data||[])}const t=await fetch("/api/events?limit=20");if(t.ok){const e=await t.json();ee.set(e.data||[])}const r=await fetch("/api/stats");if(r.ok){const e=await r.json();X.set(e.data||{})}}catch(e){console.error("Failed to load initial data:",e)}}(),na()});return[n,a,s,o,e=>o(e.detail),()=>r(1,a=!a),()=>r(1,a=!a)]}new class extends n{constructor(e){super(),a(this,e,la,oa,r,{})}}({target:document.getElementById("app")});
